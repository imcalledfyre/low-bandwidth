(function(){'use strict';const ba=["DEBUG","INFO","WARN","ERROR"];var ea="main",fa=null;function ja(a,b,d){if(!(1>a)){var c="EagRuntimeJS: ["+(new Date).toLocaleTimeString()+"]["+ea+"/"+(ba[a]||"UNKNOWN")+"] ";a:{if(0<d.length){for(var k=[],m=0;m<d.length;++m){var r=b.indexOf("{}");if(-1!=r)k.push(b.substring(0,r)),k.push(d[m]),b=b.substring(r+2);else break}if(0<k.length){k.push(b);d=k.join("");break a}}d=b}b=c+d;3<=a?console.error(b):console.log(b);fa&&fa(b,3<=a)}}function e(a,...b){ja(1,a,b)}
function ka(a,...b){ja(2,a,b)}function h(a,...b){ja(3,a,b)}function la(a,b){if(b){if(b.message?ja(3,'{}: {} - "{}"',[a,b.name,b.message]):ja(3,"{}: {}",[a,b.name]),"string"===typeof b.stack)for(b=ma(b.stack),a=0;a<b.length;++a)ja(3,"    at "+b[a],[])}else ja(3,"{}: <null>",[a])}function pa(a){return function(){h("Unsupported function called: {}.{}",a);return 0}}function C(a,b){a[b]=pa(b)}function qa(a){return new Promise(function(b){setTimeout(b,a)})}
class ra{constructor(){this.G=this.o=null;this.u=0}K(){return this.u}push(a){this.G&&(this.G._next=a);this.G=a;this.o||(this.o=a);++this.u}j(){if(this.o){const a=this.o;(this.o=a._next||null)?a._next=null:this.G=null;--this.u;return a}return null}};var ua={},H={},wa={},xa={},ya={},I={},za={},J={},Ba={},Ca={},Da={},M={},Ea={},Ha={},Ia={},Ja=null,Ka=null,La=null,Ma=null,Na=null,Oa=null,Ra=null,Sa=null,N=null,Ta=null,Ua=null,Q=null,R=null,Va=null,Wa=!1,Xa=0,Ya=null,Za=!1,$a=null,bb=null,cb=!1;const db=[];var eb=null,fb="_eaglercraftX",gb=!1,hb=!1,ib=!1,jb=!0,kb=!1,Fb=!1,Gb=!0,Hb=!0,Ib=!1;
function Jb(){"string"===typeof N.localStorageNamespace&&(fb=N.localStorageNamespace);"boolean"===typeof N.openDebugConsoleOnLaunch&&(gb=N.openDebugConsoleOnLaunch);"boolean"===typeof N.fixDebugConsoleUnloadListener&&(hb=N.fixDebugConsoleUnloadListener);"boolean"===typeof N.forceWebViewSupport&&(ib=N.forceWebViewSupport);"boolean"===typeof N.enableWebViewCSP&&(jb=N.enableWebViewCSP);"boolean"===typeof N.forceWebGL1&&(kb=N.forceWebGL1);"boolean"===typeof N.forceWebGL2&&(Fb=N.forceWebGL2);"boolean"===
typeof N.allowExperimentalWebGL1&&(Gb=N.allowExperimentalWebGL1);"boolean"===typeof N.useWebGLExt&&(Hb=N.useWebGLExt);"boolean"===typeof N.useDelayOnSwap&&(Ib=N.useDelayOnSwap)}
async function Kb(){function a(){try{k=new AudioContext}catch(r){la("Could not initialize audio context",r)}}Jb();fa=Lb;"yes"!==window.__isEaglerX188UnloadListenerSet&&(window.onbeforeunload=function(){window.__curEaglerX188UnloadListenerCB&&window.__curEaglerX188UnloadListenerCB();return!1},window.__isEaglerX188UnloadListenerSet="yes");e("Initializing EagRuntime JS context...");await Mb();Nb();Ob();Pb();Qb();Rb();Sb();C(Ia,"sendPacket");C(Ia,"getAvailablePackets");C(Ia,"getNextPacket");C(Ia,"setCrashCallback");
C(Ia,"isTabAboutToClose");Ua.classList.add("_eaglercraftX_root_element");Ua.style.overflow="hidden";for(var b=null,d;d=Ua.lastChild;)b||=d,Ua.removeChild(d);Q=document.createElement("div");Q.classList.add("_eaglercraftX_wrapper_element");Q.style.position="relative";Q.style.width="100%";Q.style.height="100%";Q.style.overflow="hidden";Q.style.backgroundColor="black";Ua.appendChild(Q);b&&(b.style.position="absolute",b.style.top="0px",b.style.left="0px",b.style.right="0px",b.style.bottom="0px",b.style.zIndex=
"2",b.classList.add("_eaglercraftX_early_splash_element"),Q.appendChild(b));await qa(10);d=window.devicePixelRatio;b=d*Q.clientWidth|0;d=d*Q.clientHeight|0;e("Initializing audio context");if("function"===typeof document.exitPointerLock){var c=navigator.userAgent;null!==c?(c=c.toLowerCase(),Za=-1!==c.indexOf("mobi")||-1!==c.indexOf("tablet")):Za=!1}else Za=!0;var k=null;!Za&&navigator.userActivation&&navigator.userActivation.hasBeenActive?a():(c=document.createElement("div"),c.classList.add("_eaglercraftX_press_any_key_image"),
c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.right="0px",c.style.bottom="0px",c.style.width="100%",c.style.height="100%",c.style.zIndex="3",c.style.touchAction="pan-x pan-y",c.style.background='center / contain no-repeat url("'+Oa+'"), left / 1000000% 100% no-repeat url("'+Oa+'") white',c.style.setProperty("image-rendering","pixelated"),Q.appendChild(c),await new Promise(function(r,D){function y(){if(!z){z=!0;Za?Q.removeChild(B):(window.removeEventListener("keydown",y),
Q.removeEventListener("mousedown",y),Q.removeEventListener("touchstart",y));try{a()}catch(G){D(G);return}r()}}var z=!1;if(Za){var B=document.createElement("div");B.classList.add("_eaglercraftX_mobile_press_any_key");B.setAttribute("style","position:absolute;background-color:white;font-family:sans-serif;top:10%;left:10%;right:10%;bottom:10%;border:5px double black;padding:calc(5px + 7vh) 15px;text-align:center;font-size:20px;user-select:none;z-index:10;");B.innerHTML='<h3 style="margin-block-start:0px;margin-block-end:0px;margin:20px 5px;">Mobile Browser Detected</h3><p style="margin-block-start:0px;margin-block-end:0px;margin:20px 5px;">Warning: EaglercraftX WASM-GC requires a lot of memory and may not be stable on most mobile devices!</p><p style="margin-block-start:0px;margin-block-end:0px;margin:20px 2px;"><button style="font: 24px sans-serif;font-weight:bold;" class="_eaglercraftX_mobile_launch_client">Launch EaglercraftX</button></p><p style="margin-block-start:0px;margin-block-end:0px;margin:25px 5px;">(Tablets and phones with large screens work best)</p>';
B.querySelector("._eaglercraftX_mobile_launch_client").addEventListener("click",y);Q.appendChild(B)}else window.addEventListener("keydown",y),Q.addEventListener("mousedown",y),Q.addEventListener("touchstart",y)}),Q.removeChild(c));k?Tb(k):Ub();e("Creating main canvas");R=document.createElement("canvas");R.classList.add("_eaglercraftX_canvas_element");R.style.width="100%";R.style.height="100%";R.style.zIndex="1";R.style.touchAction="pan-x pan-y";R.style.setProperty("-webkit-touch-callout","none");
R.style.setProperty("-webkit-tap-highlight-color","rgba(255, 255, 255, 0)");R.style.setProperty("image-rendering","pixelated");R.width=b;R.height=d;Q.appendChild(R);await Vb();e("Creating WebGL context");Q.addEventListener("webglcontextcreationerror",function(r){h("[WebGL Error]: {}",r.statusMessage)});b={antialias:!1,depth:!1,powerPreference:"high-performance",desynchronized:!0,preserveDrawingBuffer:!1,premultipliedAlpha:!1,alpha:!1};c=!1;if(Fb){e("Note: Forcing WebGL 2.0 context");d=300;var m=R.getContext("webgl2",
b);if(!m)return Wb("WebGL 2.0 is not supported on this device!"),!1}else if(kb){if(e("Note: Forcing WebGL 1.0 context"),d=200,m=R.getContext("webgl",b),!m)if(Gb){if(c=!0,m=R.getContext("experimental-webgl",b),!m)return Wb("WebGL is not supported on this device!"),!1}else return Wb("WebGL is not supported on this device!"),!1}else if(d=300,m=R.getContext("webgl2",b),!m&&(d=200,m=R.getContext("webgl",b),!m))if(Gb){if(c=!0,m=R.getContext("experimental-webgl",b),!m)return Wb("WebGL is not supported on this device!"),
!1}else return Wb("WebGL is not supported on this device!"),!1;c&&alert('WARNING: Detected "experimental" WebGL 1.0 support, certain graphics API features may be missing, and therefore EaglercraftX may malfunction and crash!');Xa=d;Va=m;Wa=c;Xb(m,d);e("OpenGL Version: {}",J.glGetString(7938));e("OpenGL Renderer: {}",J.glGetString(7937));b=J.dumpActiveExtensions();if(0===b.length)e("Unlocked the following OpenGL ES extensions: (NONE)");else for(b.sort(),e("Unlocked the following OpenGL ES extensions:"),
d=0;d<b.length;++d)e(" - {}",b[d]);J.glClearColor(0,0,0,1);J.glClear(16384);await qa(20);e("EagRuntime JS context initialization complete");return!0}
async function Yb(){Jb();fa=function(a,b){postMessage({ch:"~!LOGGER",txt:a,err:b})};e("Initializing EagRuntime worker JS context...");await Mb();C(H,"setClipboard");C(H,"getClipboard");C(H,"displayFileChooser");C(H,"fileChooserHasResult");C(H,"getFileChooserResult");C(H,"clearFileChooserResult");C(H,"downloadFileWithNameU8");C(H,"downloadFileWithNameA");C(H,"downloadScreenshot");C(H,"showDebugConsole");C(H,"addLogMessage");C(H,"isShowingDebugConsole");C(H,"getFaviconURL");Ub();C(I,"keyboardLayoutSupported");
C(I,"iterateKeyboardLayout");C(I,"updateCanvasSize");C(I,"updatePlatformAndSleep");C(I,"isVSyncSupported");C(I,"mouseSetGrabbed");C(I,"isMouseGrabSupported");C(I,"isMouseGrabbed");C(I,"isPointerLocked");C(I,"supportsFullscreen");C(I,"toggleFullscreen");C(I,"isFullscreen");C(I,"touchSetOpenKeyboardZone");C(I,"touchCloseDeviceKeyboard");C(I,"touchIsDeviceKeyboardOpenMAYBE");C(I,"gamepadSupported");C(I,"isVisualViewport");C(J,"getCapBits");C(J,"glEnable");C(J,"glDisable");C(J,"glClearColor");C(J,"glClearDepth");
C(J,"glClear");C(J,"glDepthFunc");C(J,"glDepthMask");C(J,"glCullFace");C(J,"glViewport");C(J,"glBlendFunc");C(J,"glBlendFuncSeparate");C(J,"glBlendEquation");C(J,"glBlendColor");C(J,"glColorMask");C(J,"glDrawBuffers");C(J,"glReadBuffer");C(J,"glReadPixels");C(J,"glPolygonOffset");C(J,"glLineWidth");C(J,"glGenBuffers");C(J,"glGenTextures");C(J,"glCreateProgram");C(J,"glCreateShader");C(J,"glCreateFramebuffer");C(J,"glCreateRenderbuffer");C(J,"glGenQueries");C(J,"glDeleteBuffers");C(J,"glDeleteTextures");
C(J,"glDeleteProgram");C(J,"glDeleteShader");C(J,"glDeleteFramebuffer");C(J,"glDeleteRenderbuffer");C(J,"glDeleteQueries");C(J,"glBindBuffer");C(J,"glBufferData");C(J,"glBufferSubData");C(J,"glEnableVertexAttribArray");C(J,"glDisableVertexAttribArray");C(J,"glVertexAttribPointer");C(J,"glActiveTexture");C(J,"glBindTexture");C(J,"glTexParameterf");C(J,"glTexParameteri");C(J,"glTexImage3D");C(J,"glTexImage2D");C(J,"glTexSubImage2D");C(J,"glCopyTexSubImage2D");C(J,"glTexStorage2D");C(J,"glPixelStorei");
C(J,"glGenerateMipmap");C(J,"glShaderSource");C(J,"glCompileShader");C(J,"glGetShaderi");C(J,"glGetShaderInfoLog");C(J,"glUseProgram");C(J,"glAttachShader");C(J,"glDetachShader");C(J,"glLinkProgram");C(J,"glGetProgrami");C(J,"glGetProgramInfoLog");C(J,"glDrawArrays");C(J,"glDrawElements");C(J,"glBindAttribLocation");C(J,"glGetAttribLocation");C(J,"glGetUniformLocation");C(J,"glGetUniformBlockIndex");C(J,"glBindBufferRange");C(J,"glUniformBlockBinding");C(J,"glUniform1f");C(J,"glUniform2f");C(J,"glUniform3f");
C(J,"glUniform4f");C(J,"glUniform1i");C(J,"glUniform2i");C(J,"glUniform3i");C(J,"glUniform4i");C(J,"glUniformMatrix2fv");C(J,"glUniformMatrix3fv");C(J,"glUniformMatrix4fv");C(J,"glUniformMatrix3x2fv");C(J,"glUniformMatrix4x2fv");C(J,"glUniformMatrix4x3fv");C(J,"glBindFramebuffer");C(J,"glCheckFramebufferStatus");C(J,"glBlitFramebuffer");C(J,"glRenderbufferStorage");C(J,"glFramebufferTexture2D");C(J,"glFramebufferTextureLayer");C(J,"glBindRenderbuffer");C(J,"glFramebufferRenderbuffer");C(J,"glGetInteger");
C(J,"glGetError");C(J,"getAllExtensions");C(J,"dumpActiveExtensions");C(J,"glGetString");C(J,"glGenVertexArrays");C(J,"glDeleteVertexArrays");C(J,"glBindVertexArray");C(J,"glVertexAttribDivisor");C(J,"glDrawArraysInstanced");C(J,"glDrawElementsInstanced");C(J,"isContextLost");C(Ca,"getMic");C(Ca,"setDataAvailableHandler");C(Da,"isSupported");C(Da,"createRTCPeerConnection");C(M,"supported");C(M,"clientLANReadyState");C(M,"clientLANCloseConnection");C(M,"clientLANSendPacket");C(M,"clientLANReadPacket");
C(M,"clientLANAvailable");C(M,"clientLANSetICEServersAndConnect");C(M,"clearLANClientState");C(M,"clientLANAwaitICECandidate");C(M,"clientLANAwaitDescription");C(M,"clientLANAwaitChannel");C(M,"clientLANClosed");C(M,"clientLANSetICECandidate");C(M,"clientLANSetDescription");C(M,"clientLANClosed");C(M,"serverLANInitializeServer");C(M,"serverLANCloseServer");C(M,"serverLANCreatePeer");C(Ea,"checkSupported");C(Ea,"checkCSPSupported");C(Ea,"sendStringMessage");C(Ea,"sendBinaryMessage");C(Ea,"beginShowing");
C(Ea,"resize");C(Ea,"endShowing");C(Ha,"startIntegratedServer");C(Ha,"sendPacket");C(Ha,"getAvailablePackets");C(Ha,"getNextPacket");C(Ha,"killWorker");C(Ha,"showCrashReportOverlay");C(Ha,"hideCrashReportOverlay");Zb();e("EagRuntime worker JS context initialization complete")}
function $b(a){Ya=a.buffer;e("WebAssembly direct memory resized to {} MiB",.01*(Ya.byteLength/1024/10.24|0));new Uint8Array(Ya);new Int8Array(Ya);new Uint16Array(Ya);new Int16Array(Ya);new Uint32Array(Ya);new Int32Array(Ya);new Float32Array(Ya)}const ac=new ra;function T(a,b,d){ac.push({eventType:a<<5|b,eventObj:d,_next:null})}let bc=/.+:wasm-function\[[0-9]+]:0x([0-9a-f]+).*/;
function ma(a){if(!a)return null;const b=[];for(let d of a.split("\n")){if(Ma&&(a=bc.exec(d),null!==a&&2<=a.length&&(a=parseInt(a[1],16),!isNaN(a))))try{const c=Ma([a]);if(0<c.length){for(let k of c)b.push(""+k.className+"."+k.method+"("+k.file+":"+k.line+")");continue}}catch(c){}d=d.trim();d.startsWith("at ")&&(d=d.substring(3));b.push(d)}return b}
function cc(a){const b=a?ma(a.stack):null;a="Native Browser Exception\n----------------------------------\n  Line: "+(a&&"string"===typeof a.fileName?a.fileName:"unknown")+":"+(a&&"number"===typeof a.lineNumber?a.lineNumber:"unknown")+":"+(a&&"number"===typeof a.columnNumber?a.columnNumber:"unknown")+"\n  Type: "+(a&&"string"===typeof a.name?a.name:"unknown")+"\n  Desc: "+(a&&"string"===typeof a.message?a.message:"null")+"\n----------------------------------\n\nDeobfuscated stack trace:\n    at "+
(b?b.join("\n    at "):"null")+"\n\nThis exception was not handled by the WASM binary\n";if("undefined"!==typeof window)dc(a,!0);else if(ec){h("\n{}",a);try{ec(a,!0)}catch(d){console.log(d)}}else h("\n{}",a)}
function dc(a,b){h("Game crashed!");var d="Game Crashed! I have fallen and I can't get up!\n\n"+a+"\n\n",c='eaglercraft.version = "'+db[0]+'"\neaglercraft.minecraft = "'+db[2]+'"\neaglercraft.brand = "'+db[1]+'"\n\n'+fc()+"\nwindow.eaglercraftXOpts = "+JSON.stringify(N)+"\n\ncurrentTime = "+(new Date).toLocaleString()+"\n\n"+gc("userAgent")+gc("vendor")+gc("language")+gc("hardwareConcurrency")+gc("deviceMemory")+gc("platform")+gc("product")+hc()+"\n"+ic("localStorage")+ic("sessionStorage")+ic("indexedDB")+
"\nrootElement.clientWidth = "+(Q?Q.clientWidth:"undefined")+"\nrootElement.clientHeight = "+(Q?Q.clientHeight:"undefined")+"\n"+ic("innerWidth")+ic("innerHeight")+ic("outerWidth")+ic("outerHeight")+ic("devicePixelRatio")+jc("availWidth")+jc("availHeight")+jc("colorDepth")+jc("pixelDepth")+"\n"+kc()+"\n",k=d+c;const m=[];try{"object"===typeof N&&"object"===typeof N.hooks&&"function"===typeof N.hooks.crashReportShow&&N.hooks.crashReportShow(k,function(r){m.push(r)})}catch(r){la("Uncaught exception invoking crash report hook",
r)}if(cb){h("");h("An additional crash report was supressed:");k=a.split(/[\r\n]+/);for(a=0;a<k.length;++a)h("  {}",k[a]);if(0<m.length)for(a=0;a<m.length;++a)if(k=m[a]){h("");h("  ----------[ CRASH HOOK ]----------");k=k.split(/[\r\n]+/);for(a=0;a<k.length;++a)h("  {}",k[a]);h("  ----------------------------------")}}else{cb=!0;if(0<m.length){k=d+"Got the following messages from the crash report hook registered in eaglercraftXOpts:\n\n";for(a=0;a<m.length;++a)k+="----------[ CRASH HOOK ]----------\n"+
m[a]+"\n----------------------------------\n\n";k+=c}(c=Q||Ua)?(b&&h("\n{}",k),b=document.createElement("img"),a=document.createElement("div"),b.setAttribute("style","z-index:100;position:absolute;top:10px;left:calc(50% - 151px);"),b.src=Ra,a.setAttribute("style","z-index:100;position:absolute;top:135px;left:10%;right:10%;bottom:50px;background-color:white;border:1px solid #cccccc;overflow-x:hidden;overflow-y:scroll;overflow-wrap:break-word;white-space:pre-wrap;font: 14px monospace;padding:10px;"),
a.classList.add("_eaglercraftX_crash_element"),c.appendChild(b),c.appendChild(a),a.appendChild(document.createTextNode(k)),eb&&eb(),window.__curEaglerX188UnloadListenerCB=null):(alert("Root element not found, crash report was printed to console"),h("\n{}",k))}}
function Wb(a){if(!cb){cb=!0;var b=Q||Ua;h("Compatibility error: {}",a);if(b){var d=document.createElement("img"),c=document.createElement("div");d.setAttribute("style","z-index:100;position:absolute;top:10px;left:calc(50% - 151px);");d.src=Ra;c.setAttribute("style","z-index:100;position:absolute;top:135px;left:10%;right:10%;bottom:50px;background-color:white;border:1px solid #cccccc;overflow-x:hidden;overflow-y:scroll;font:18px sans-serif;padding:40px;");c.classList.add("_eaglercraftX_incompatible_element");
b.appendChild(d);b.appendChild(c);c.innerHTML='<h2><svg style="vertical-align:middle;margin:0px 16px 8px 8px;" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none"><path stroke="#000000" stroke-width="3" stroke-linecap="square" d="M1.5 8.5v34h45v-28m-3-3h-10v-3m-3-3h-10m15 6h-18v-3m-3-3h-10"/><path stroke="#000000" stroke-width="2" stroke-linecap="square" d="M12 21h0m0 4h0m4 0h0m0-4h0m-2 2h0m20-2h0m0 4h0m4 0h0m0-4h0m-2 2h0"/><path stroke="#000000" stroke-width="2" stroke-linecap="square" d="M20 30h0 m2 2h0 m2 2h0 m2 2h0 m2 -2h0 m2 -2h0 m2 -2h0"/></svg>+ This device is incompatible with Eaglercraft&ensp;:(</h2><div style="margin-left:40px;"><p style="font-size:1.2em;"><b style="font-size:1.1em;">Issue:</b> <span style="color:#BB0000;" id="_eaglercraftX_crashReason"></span><br /></p><p style="margin-left:10px;font:0.9em monospace;" id="_eaglercraftX_crashUserAgent"></p><p style="margin-left:10px;font:0.9em monospace;" id="_eaglercraftX_crashWebGL"></p><p style="margin-left:10px;font:0.9em monospace;">Current Date: '+
(new Date).toLocaleString()+'</p><p><br /><span style="font-size:1.1em;border-bottom:1px dashed #AAAAAA;padding-bottom:5px;">Things you can try:</span></p><ol><li><span style="font-weight:bold;">Just try using Eaglercraft on a different device</span>, it isn\'t a bug it\'s common sense</li><li style="margin-top:7px;">If this screen just appeared randomly, try restarting your browser or device</li><li style="margin-top:7px;">If you are not using Chrome/Edge, try installing the latest Google Chrome</li><li style="margin-top:7px;">If your browser is out of date, please update it to the latest version</li></ol></div>';
c.querySelector("#_eaglercraftX_crashReason").appendChild(document.createTextNode(a));try{var k=window.navigator.userAgent}catch(r){k="<error>"}c.querySelector("#_eaglercraftX_crashUserAgent").appendChild(document.createTextNode(k));eb&&eb();window.__curEaglerX188UnloadListenerCB=null;a="No GL_RENDERER string could be queried";try{const r=document.createElement("canvas");r.width=64;r.height=64;const D=r.getContext("webgl");if(D){if(D.getExtension("WEBGL_debug_renderer_info"))var m=D.getParameter(37446);
else(m=D.getParameter(WebGLRenderingContext.RENDERER))&&(m+=" [masked]");m&&(a=m)}}catch(r){}c.querySelector("#_eaglercraftX_crashWebGL").appendChild(document.createTextNode(a))}else alert("Compatibility error: "+a)}}var lc=null;
function fc(){if(lc)return lc;try{var a=Va,b=Wa;if(!a){b=!1;var d=document.createElement("canvas");d.width=64;d.height=64;a=d.getContext("webgl2");a||(a=d.getContext("webgl"),a||(b=!0,a=d.getContext("experimental-webgl")))}return a?(d="",0<Xa&&(d+="webgl.version = "+a.getParameter(7938)+"\n"),d=a.getExtension("WEBGL_debug_renderer_info")?d+("webgl.renderer = "+a.getParameter(37446)+"\nwebgl.vendor = "+a.getParameter(37445)+"\n"):d+("webgl.renderer = "+a.getParameter(7937)+" [masked]\nwebgl.vendor = "+
a.getParameter(7936)+" [masked]\n"),0<Xa?(d+="\nwebgl.version.id = "+Xa+"\nwebgl.experimental = "+b,200===Xa?d+="\nwebgl.ext.ANGLE_instanced_arrays = "+!!a.getExtension("ANGLE_instanced_arrays")+"\nwebgl.ext.EXT_color_buffer_half_float = "+!!a.getExtension("EXT_color_buffer_half_float")+"\nwebgl.ext.EXT_shader_texture_lod = "+!!a.getExtension("EXT_shader_texture_lod")+"\nwebgl.ext.OES_fbo_render_mipmap = "+!!a.getExtension("OES_fbo_render_mipmap")+"\nwebgl.ext.OES_texture_float = "+!!a.getExtension("OES_texture_float")+
"\nwebgl.ext.OES_texture_half_float = "+!!a.getExtension("OES_texture_half_float")+"\nwebgl.ext.OES_texture_half_float_linear = "+!!a.getExtension("OES_texture_half_float_linear"):300<=Xa&&(d+="\nwebgl.ext.EXT_color_buffer_float = "+!!a.getExtension("EXT_color_buffer_float")+"\nwebgl.ext.EXT_color_buffer_half_float = "+!!a.getExtension("EXT_color_buffer_half_float")+"\nwebgl.ext.OES_texture_float_linear = "+!!a.getExtension("OES_texture_float_linear")),d+="\nwebgl.ext.EXT_texture_filter_anisotropic = "+
!!a.getExtension("EXT_texture_filter_anisotropic")+"\n"):d+="webgl.ext.ANGLE_instanced_arrays = "+!!a.getExtension("ANGLE_instanced_arrays")+"\nwebgl.ext.EXT_color_buffer_float = "+!!a.getExtension("EXT_color_buffer_float")+"\nwebgl.ext.EXT_color_buffer_half_float = "+!!a.getExtension("EXT_color_buffer_half_float")+"\nwebgl.ext.EXT_shader_texture_lod = "+!!a.getExtension("EXT_shader_texture_lod")+"\nwebgl.ext.OES_fbo_render_mipmap = "+!!a.getExtension("OES_fbo_render_mipmap")+"\nwebgl.ext.OES_texture_float = "+
!!a.getExtension("OES_texture_float")+"\nwebgl.ext.OES_texture_float_linear = "+!!a.getExtension("OES_texture_float_linear")+"\nwebgl.ext.OES_texture_half_float = "+!!a.getExtension("OES_texture_half_float")+"\nwebgl.ext.OES_texture_half_float_linear = "+!!a.getExtension("OES_texture_half_float_linear")+"\nwebgl.ext.EXT_texture_filter_anisotropic = "+!!a.getExtension("EXT_texture_filter_anisotropic")+"\n",lc=d):lc="Failed to query GPU info!\n"}catch(c){return lc="ERROR: could not query webgl info - "+
c+"\n"}}function gc(a){try{var b=window.navigator[a]}catch(d){b="<error>"}return"window.navigator."+a+" = "+b+"\n"}function hc(){try{var a=[];if("object"===typeof navigator.plugins){var b=navigator.plugins.length;if(0<b)for(var d=0;d<b;++d){var c=navigator.plugins[d];a.push({name:c.name,filename:c.filename,desc:c.description})}}var k=JSON.stringify(a)}catch(m){k="<error>"}return"window.navigator.plugins = "+k+"\n"}
function jc(a){try{var b=window.screen[a]}catch(d){b="<error>"}return"window.screen."+a+" = "+b+"\n"}function kc(){try{var a=window.location.href}catch(b){a="<error>"}return"window.location.href = "+a+"\n"}function ic(a){try{var b=window[a]}catch(d){b="<error>"}return"window."+a+" = "+b+"\n"};function mc(a,b,d){const c=document.createElement("a");c.style.position="absolute";c.style.left="0px";c.style.top="0px";c.style.zIndex="-100";c.style.color="transparent";c.innerText="Download File";c.href=b;c.target="_blank";c.download=a;Q.appendChild(c);setTimeout(function(){c.click();setTimeout(function(){Q.removeChild(c)},50);d&&setTimeout(d,6E4)},50)}var nc=0,oc=null,pc=null,qc=null,rc=null;
function Lb(a,b){if(qc)rc&&rc(a,b);else for(a={msg:a,err:b,next:null},pc&&(pc.next=a),oc||=a,pc=a,++nc;256<nc;)--nc,oc&&=oc.next}
function Nb(){function a(){r=!1;D=null;null!==z?(Q.removeChild(z),y=z=null):null!==y&&(Q.removeChild(y),y=null)}function b(g){try{window.localStorage&&window.localStorage.setItem(ca,g?"true":"false")}catch(t){}}function d(){try{if(window.localStorage){const g=window.localStorage.getItem(ca);return g&&"true"===g.toLowerCase()}return!1}catch(g){return!1}}function c(){if(qc)qc.focus();else{var g=Math.round(1E3*window.devicePixelRatio);const t=Math.round(400*window.devicePixelRatio);if(qc=window.open("",
"_blank","top="+Math.round((window.screen.height-t)/2)+",left="+Math.round((window.screen.width-g)/2)+",width="+g+",height="+t+",menubar=0,status=0,titlebar=0,toolbar=0")){qc.focus();B=qc.document;B.write('<!DOCTYPE html><html><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>Debug Console</title><link type="image/png" rel="shortcut icon" href="'+Sa+'" /></head><body style="overflow-x:hidden;overflow-y:scroll;padding:0px;"><p id="loggerMessageContainer" style="overflow-wrap:break-word;white-space:pre-wrap;font:14px monospace;padding:10px;"></p></body></html>');
B.close();G=B.body;V=B.getElementById("loggerMessageContainer");for(g=oc;g;)k(g.msg+"\n",g.err?"#DD0000":"#000000"),g=g.next;pc=oc=null;nc=0;m();g=()=>{null!=qc&&(qc=null,b(!1))};qc.addEventListener("beforeunload",g);qc.addEventListener("unload",g)}else h("Logger popup was blocked!"),window.alert("ERROR: Popup blocked!\n\nPlease make sure you have popups enabled for this site!")}}function k(g,t){var w=B.createElement("span");w.innerText=g;w.style.color=t;V.appendChild(w);for(g=V.children;2048<g.length;)g[0].remove()}
function m(){setTimeout(()=>{qc.scrollTo(0,G.scrollHeight||G.clientHeight)},1)}H.setClipboard=function(g){try{if(window.navigator.clipboard)return window.navigator.clipboard.writeText(g),!0}catch(t){h("Failed to set clipboard data!")}return!1};H.getClipboard=new WebAssembly.Suspending(async function(){var g=null;try{window.navigator.clipboard&&(g=await navigator.clipboard.readText())}catch(t){h("Failed to read clipboard data!")}return g});var r=!1,D=null,y=null,z=null;H.displayFileChooser=function(g,
t){a();if(Za){const f=z=document.createElement("div");f.classList.add("_eaglercraftX_mobile_file_chooser_popup");f.style.position="absolute";f.style.backgroundColor="white";f.style.fontFamily="sans-serif";f.style.top="10%";f.style.left="10%";f.style.right="10%";f.style.border="5px double black";f.style.padding="15px";f.style.textAlign="left";f.style.fontSize="20px";f.style.userSelect="none";f.style.zIndex="150";var w=document.createElement("h3");w.appendChild(document.createTextNode("File Chooser"));
f.appendChild(w);w=document.createElement("p");const v=y=document.createElement("input");v.type="file";v.accept=null===g?"."+t:g;v.multiple=!1;w.appendChild(v);f.appendChild(w);g=document.createElement("p");t=document.createElement("button");t.classList.add("_eaglercraftX_mobile_file_chooser_btn_cancel");t.style.fontSize="1.0em";t.addEventListener("click",function(){z===f&&(Q.removeChild(f),y=z=null)});t.appendChild(document.createTextNode("Cancel"));g.appendChild(t);g.appendChild(document.createTextNode(" "));
t=document.createElement("button");t.classList.add("_eaglercraftX_mobile_file_chooser_btn_done");t.style.fontSize="1.0em";t.style.fontWeight="bold";t.addEventListener("click",function(){if(z===f){if(0<v.files.length){const p=v.files[0];p.arrayBuffer().then(function(x){r=!0;D={fileName:p.name,fileData:x}}).catch(function(){r=!0;D=null})}else r=!0,D=null;Q.removeChild(f);y=z=null}});t.appendChild(document.createTextNode("Done"));g.appendChild(t);f.appendChild(g);Q.appendChild(f)}else{const f=y=document.createElement("input");
f.type="file";f.style.position="absolute";f.style.left="0px";f.style.top="0px";f.style.zIndex="-100";f.accept=null===g?"."+t:g;f.multiple=!1;f.addEventListener("change",function(){if(y===f){if(0<f.files.length){const v=f.files[0];v.arrayBuffer().then(function(p){r=!0;D={fileName:v.name,fileData:p}}).catch(function(){r=!0;D=null})}else r=!0,D=null;Q.removeChild(f);y=null}});Q.appendChild(f);window.setTimeout(function(){f.click()},50)}};H.fileChooserHasResult=function(){return r};H.getFileChooserResult=
function(){r=!1;const g=D;D=null;return g};H.clearFileChooserResult=a;H.downloadFileWithNameU8=function(g,t){const w=URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));mc(g,w,function(){URL.revokeObjectURL(w)})};H.downloadFileWithNameA=function(g,t){const w=URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));mc(g,w,function(){URL.revokeObjectURL(w)})};H.downloadScreenshot=function(g,t){mc(g,t.toDataURL("image/png"),null)};var B=null,G=null,V=null;const ca=fb+"showDebugConsole",
u=hb?"beforeunload":"unload";try{window.addEventListener(u,()=>{if(qc){var g=qc;V=G=B=qc=null;g.close()}})}catch(g){}(gb||d())&&c();rc=function(g,t){var w=qc.innerHeight+qc.pageYOffset>=G.offsetHeight;k(g+"\n",t?"#DD0000":"#000000");w&&m()};H.showDebugConsole=function(){b(!0);c()};H.addLogMessage=Lb;H.isShowingDebugConsole=function(){return!!qc};H.getFaviconURL=function(){return Sa}};wa.getEPKFileData=function(a){const b=Na[a];Na[a]=null;return b};wa.getEPKFileCount=function(){return Na.length};
if("undefined"!==typeof window){wa.loadImageFile0=new WebAssembly.Suspending(function(a,b){return new Promise(function(d){const c=URL.createObjectURL(new Blob([a],{type:b}));if(c){const k=document.createElement("img");k.addEventListener("load",function(){URL.revokeObjectURL(c);d({width:k.width,height:k.height,img:k})});k.addEventListener("error",function(){URL.revokeObjectURL(c);d(null)});k.src=c}else d(null)})});var sc=null,tc=null;wa.loadImageFile1=function(a,b){const d=a.width,c=a.height;if(a=
a.img)sc||=document.createElement("canvas"),sc.width<d&&(sc.width=d),sc.height<c&&(sc.height=c),tc||(tc=sc.getContext("2d",{willReadFrequently:!0}),tc.imageSmoothingEnabled=!1),tc.clearRect(0,0,d,c),tc.drawImage(a,0,0,d,c),b.set(tc.getImageData(0,0,d,c).data,0)}}else C(wa,"loadImageFile0"),C(wa,"loadImageFile1");function Tb(a){xa.getContext=function(){return a};xa.registerIsEndedHandler=function(b,d){d.selfEndHandler||(d.selfEndHandler=function(){d.isEnded=!0});b.addEventListener("ended",d.selfEndHandler)};xa.releaseIsEndedHandler=function(b,d){d.selfEndHandler&&b.removeEventListener("ended",d.selfEndHandler)};xa.decodeAudioBrowser=new WebAssembly.Suspending(function(b,d){return new Promise(function(c){const k=new Uint8Array(b.length);k.set(b,0);a.decodeAudioData(k.buffer,c,function(){h("Failed to load audio: {}",
d);c(null)})})})}function Ub(){xa.getContext=function(){return null};C(xa,"registerIsEndedHandler");C(xa,"releaseIsEndedHandler");C(xa,"decodeAudioBrowser")};function uc(a){return"string"===typeof a?a:"undefined"===typeof a?null:"string"===typeof a[0]?a[0]:null}function vc(a){return"undefined"===typeof a?null:"undefined"===typeof a.data?null:a.data}
ya.openDB=new WebAssembly.Suspending(function(a){return new Promise(function(b){if("undefined"===typeof indexedDB)b({failedInit:!0,failedLocked:!1,failedError:"IndexedDB not supported",database:null});else{try{var d=indexedDB.open(a,1)}catch(k){b({failedInit:!0,failedLocked:!1,failedError:"Exception opening database",database:null});return}var c=b;d.addEventListener("success",function(){c&&c({failedInit:!1,failedLocked:!1,failedError:null,database:d.result});c=null});d.addEventListener("blocked",
function(){c&&c({failedInit:!1,failedLocked:!0,failedError:"Database is locked",database:null});c=null});d.addEventListener("error",function(){c&&c({failedInit:!0,failedLocked:!1,failedError:"Opening database failed",database:null});c=null});d.addEventListener("upgradeneeded",function(){d.result.createObjectStore("filesystem",{keyPath:["path"]})})}})});
function wc(a,b){return new Promise(function(d){const c=a.transaction("filesystem","readwrite").objectStore("filesystem").delete([b]);c.addEventListener("success",function(){d(!0)});c.addEventListener("error",function(){d(!1)})})}ya.eaglerDelete=new WebAssembly.Suspending(wc);
function xc(a,b){return new Promise(function(d){const c=a.transaction("filesystem","readonly").objectStore("filesystem").get([b]);c.addEventListener("success",function(){d(vc(c.result))});c.addEventListener("error",function(){d(null)})})}ya.eaglerRead=new WebAssembly.Suspending(xc);
function yc(a,b,d){return new Promise(function(c){const k=a.transaction("filesystem","readwrite").objectStore("filesystem").put({path:b,data:d});k.addEventListener("success",function(){c(!0)});k.addEventListener("error",function(){c(!1)})})}ya.eaglerWrite=new WebAssembly.Suspending(yc);
ya.eaglerExists=new WebAssembly.Suspending(function(a,b){return new Promise(function(d){const c=a.transaction("filesystem","readonly").objectStore("filesystem").count([b]);c.addEventListener("success",function(){d(0<c.result)});c.addEventListener("error",function(){d(!1)})})});ya.eaglerMove=new WebAssembly.Suspending(async function(a,b,d){const c=await xc(a,b);return c&&await yc(a,d,c)?await wc(a,b):!1});
ya.eaglerCopy=new WebAssembly.Suspending(async function(a,b,d){return(b=await xc(a,b))&&await yc(a,d,b)});ya.eaglerSize=new WebAssembly.Suspending(function(a,b){return new Promise(function(d){const c=a.transaction("filesystem","readonly").objectStore("filesystem").get([b]);c.addEventListener("success",function(){const k=vc(c.result);d(k?k.byteLength:-1)});c.addEventListener("error",function(){d(-1)})})});
function zc(a){if(0===a.length)return-1;for(var b=0,d=0,c=a.length;d<c;++d)47===a.charCodeAt(d)&&++b;return b}
ya.eaglerIterate=new WebAssembly.Suspending(function(a,b,d){return new Promise(function(c){const k=[],m=a.transaction("filesystem","readonly").objectStore("filesystem").openCursor(),r=0===b.length,D=d?-1:zc(b);m.addEventListener("success",function(){const y=m.result;if(null===y||null===y.key)c({length:k.length,getRow:function(B){return k[B]}});else{var z=uc(y.key);null!=z&&(!r&&!z.startsWith(b)||!d&&zc(z)!==D||k.push(z));y.continue()}});m.addEventListener("error",function(){c(null)})})});async function Vb(){function a(){var l=window.devicePixelRatio;.01>l&&(l=1);ca=V=0;for(var A=R;A&&!isNaN(A.offsetLeft)&&!isNaN(A.offsetTop);)V+=A.offsetLeft-A.scrollLeft,ca+=A.offsetTop-A.scrollTop,A=A.offsetParent;A=Q.clientWidth*l|0;var U=Q.clientHeight*l|0,O=0,X=0,oa=A,na=U;if(da){na=window.visualViewport;var Y=na.scale;O=na.pageLeft*l*Y;X=na.pageTop*l*Y;oa=na.width*l*Y;na=na.height*l*Y;1>oa&&(oa=1);1>na&&(na=1);0>O?(oa+=O,O=0):O>=A&&(O=A-1);0>X?(na+=X,X=0):X>=U&&(X=U-1);O+oa>A&&(oa=A-O);X+na>
U&&(na=U-X)}Y={eventTypeMask:0};P!==l&&(P=l,Y.eventTypeMask|=4,Y.windowDPI=l);if(E!==A||K!==U)E=A,K=U,Y.eventTypeMask|=1,Y.windowWidth=A,Y.windowHeight=U;if(Z!==O||W!==X||Fa!==oa||ab!==na)Z=O,W=X,Fa=oa,ab=na,Y.eventTypeMask|=2,Y.visualViewportX=O,Y.visualViewportY=X,Y.visualViewportW=oa,Y.visualViewportH=na;0!==Y.eventTypeMask&&T(0,9,Y)}function b(l){const A=l.length,U=Array(A);for(var O=0;O<A;++O){const X=l.item(O);U[O]={pointX:X.pageX-V,pointY:X.pageY-ca,radius:.5*(X.radiusX+X.radiusY),force:X.force,
pointUID:X.identifier}}return U}function d(l,A){return{eventType:l,keyCode:A.code||null,keyName:A.key||null,legacyCode:"number"===typeof A.which?A.which:"number"===typeof A.keyCode?A.keyCode:0,location:A.location,mods:(A.ctrlKey?1:0)|(A.shiftKey?2:0)|(A.metaKey?4:0)}}function c(){return new Promise(function(l){if(-1!==L)throw Error("Main thread is already waiting for VSync!");const A=[!1];window.requestAnimationFrame(function(){A[0]||(A[0]=!0,-1!==L&&(window.clearTimeout(L),L=-1),l())});L=window.setTimeout(function(){A[0]||
(A[0]=!0,L=-1,l())},20)})}function k(l){return new Promise(function(A){setTimeout(A,l)})}function m(l){if(0<l&&1E3>=l){const U=1E3/l;if(0===ha)ha=performance.now()+U;else{l=performance.now();var A=ha-l|0;if(0<A)return!Ib&&Ac?Bc().then(function(){var O=performance.now(),X=ha-O|0;if(0<X)return k(X).then(function(){var oa=performance.now();(ha+=U)<oa&&(ha=oa)});(ha+=U)<O&&(ha=O)}):k(A).then(function(){var O=performance.now();(ha+=U)<O&&(ha=O)});(ha+=U)<l&&(ha=l)}}else ha=0;return Ib?Cc(0):Bc()}function r(l){if(Aa){va=
!!l;var A=performance.now()|0;if(l){Ga=!0;try{R.requestPointerLock()}catch(U){}-1!==sa&&window.clearTimeout(sa);sa=-1;3E3>A-Pa&&(sa=window.setTimeout(function(){try{R.requestPointerLock()}catch(U){}},3100-(A-Pa)))}else if(-1!==sa&&window.clearTimeout(sa),sa=-1,!Ga)try{document.exitPointerLock()}catch(U){}}}function D(){if(ia)if(n.matches){if(q)try{navigator.keyboard.unlock()}catch(l){}try{document.exitFullscreen()}catch(l){}}else{if(q)try{navigator.keyboard.lock()}catch(l){}try{R.requestFullscreen()}catch(l){}}}
function y(){B()?z():g?(g.blur(),g.value="",setTimeout(function(){g&&(u?u.removeChild(g):g.remove(),g=null);u&&(Q.removeChild(u),u=null)},10)):(u&&(Q.removeChild(u),u=null),u=document.createElement("form"),u.setAttribute("autocomplete","off"),u.classList.add("_eaglercraftX_text_input_wrapper"),u.style.position="absolute",u.style.top="0px",u.style.left="0px",u.style.right="0px",u.style.bottom="0px",u.style.zIndex="-100",u.style.margin="0px",u.style.padding="0px",u.style.border="none",u.addEventListener("submit",
function(l){l.preventDefault();l.stopPropagation();l=l.timeStamp;l&&(0!==v&&10>l-v||0!==p&&10>l-p||0!==x&&10>l-x)||(f||(e("Note: Generating return keystroke from submit event on form, this browser probably doesn't generate keydown/beforeinput/input when enter/return is pressed on the on-screen keyboard"),f=!0),T(0,3,{eventType:0,absoluteCode:28,absoluteChar:10}))}),g=document.createElement("input"),g.type="password",g.value=" ",g.classList.add("_eaglercraftX_text_input_element"),g.setAttribute("autocomplete",
"off"),g.style.position="absolute",g.style.top="0px",g.style.left="0px",g.style.right="0px",g.style.bottom="0px",g.style.zIndex="-100",g.style.margin="0px",g.style.padding="0px",g.style.border="none",g.style.setProperty("-webkit-touch-callout","default"),g.addEventListener("beforeinput",function(l){if(g===l.target){t||(e("Note: Caught beforeinput event from on-screen keyboard, browser probably does not generate global keydown/keyup events on text fields, or does not respond to cancelling keydown"),
t=!0);var A=l.timeStamp;if(A){if(0!==v&&10>A-v)return;p=A}l.preventDefault();l.stopPropagation();switch(l.inputType){case "insertParagraph":case "insertLineBreak":T(0,3,{eventType:0,absoluteCode:28,absoluteChar:10});break;case "deleteWordBackward":case "deleteSoftLineBackward":case "deleteHardLineBackward":case "deleteEntireSoftLine":case "deleteContentBackward":case "deleteContent":T(0,3,{eventType:0,absoluteCode:14,absoluteChar:0});break;case "deleteWordForward":case "deleteSoftLineForward":case "deleteHardLineForward":case "deleteContentForward":T(0,
3,{eventType:0,absoluteCode:211,absoluteChar:0});break;case "insertText":case "insertCompositionText":case "insertReplacementText":(l=l.data)&&0<l.length&&T(0,3,{eventType:1,codepoints:l});break;case "insertFromPaste":case "insertFromPasteAsQuotation":case "insertFromDrop":case "insertFromYank":case "insertLink":(l=l.data)&&0<l.length&&T(0,4,l);break;case "historyUndo":case "historyRedo":case "deleteByDrag":case "deleteByCut":break;default:e('Ignoring InputEvent.inputType "{}" from on-screen keyboard',
l.inputType)}}}),g.addEventListener("input",function(l){if(g===l.target){w||(e("Note: Caught legacy input events from on-screen keyboard, browser could be outdated and doesn't support beforeinput event, or does not respond to cancelling beforeinput"),w=!0);if(l=l.timeStamp){if(0!==v&&10>l-v||0!==p&&10>l-p)return;x=l}l=g.value;var A=l.length;0===A?T(0,3,{eventType:0,absoluteCode:14,absoluteChar:0}):1===A?T(0,3,{eventType:1,codepoints:l}):(l=l.trim(),A=l.length,0===A?T(0,3,{eventType:0,absoluteCode:57,
absoluteChar:32}):T(0,3,{eventType:1,codepoints:l.charAt(A-1)}));g.value=" ";g.setSelectionRange(1,1)}}),g.addEventListener("focus",function(l){g===l.target&&(g.value=" ",g.setSelectionRange(1,1))}),g.addEventListener("select",function(l){g===l.target&&(l.preventDefault(),l.stopPropagation(),g.value=" ",g.setSelectionRange(1,1))}),u.appendChild(g),Q.appendChild(u),g.value=" ",g.focus(),g.select(),g.setSelectionRange(1,1))}function z(){if(g){g.blur();g.value="";const l=g,A=u;window.setTimeout(function(){null!==
A?(A.removeChild(l),A.remove()):l.remove()},10);u=g=null}else u&&(Q?Q.removeChild(u):u.remove(),u=null)}function B(){return!!g&&document.activeElement===g}var G=null,V=0,ca=0,u=null,g=null,t=!1,w=!1,f=!1,v=0,p=0,x=0,E=-1,K=-1,P=-1,da=!1,Z=-1,W=-1,Fa=-1,ab=-1,Aa=!1,va=!1,Ga=!1,Pa=0,sa=-1,ia=!1,n=null,q=!1,F=!1,L=-1,S=!1,aa=null,ta=null,Qa=null,lb=null,mb=null,nb=null,ob=null,pb=null,qb=null,rb=null,sb=null,tb=null,ub=null,vb=null,wb=null,xb=null,yb=null,zb=null,Ab=null,Bb=null,Cb=null,Db=null,Eb=null;
G=document.createElement("div");G.classList.add("_eaglercraftX_keyboard_open_zone");G.style.display="none";G.style.position="absolute";G.style.backgroundColor="transparent";G.style.top="0px";G.style.left="0px";G.style.width="0px";G.style.height="0px";G.style.zIndex="100";G.style.touchAction="pan-x pan-y";G.style.setProperty("-webkit-touch-callout","none");G.style.setProperty("-webkit-tap-highlight-color","rgba(255, 255, 255, 0)");Q.appendChild(G);a();Q.addEventListener("contextmenu",aa=function(l){l.preventDefault();
l.stopPropagation()});R.addEventListener("mousedown",ta=function(l){l.preventDefault();l.stopPropagation();Aa&&va&&document.pointerLockElement!==R?r(1):T(0,0,{eventType:0,posX:l.offsetX,posY:l.offsetY,button:l.button})});R.addEventListener("mouseup",Qa=function(l){l.preventDefault();l.stopPropagation();T(0,0,{eventType:1,posX:l.offsetX,posY:l.offsetY,button:l.button})});R.addEventListener("mousemove",lb=function(l){l.preventDefault();l.stopPropagation();T(0,0,{eventType:2,posX:l.offsetX,posY:l.offsetY,
movementX:l.movementX,movementY:l.movementY})});R.addEventListener("mouseenter",mb=function(){T(0,7,null)});R.addEventListener("mouseleave",nb=function(){T(0,8,null)});R.addEventListener("touchstart",ob=function(l){l.preventDefault();l.stopPropagation();T(0,2,{eventType:0,changedTouches:b(l.changedTouches),targetTouches:b(l.targetTouches)});z()});R.addEventListener("touchend",pb=function(l){l.preventDefault();l.stopPropagation();T(0,2,{eventType:2,changedTouches:b(l.changedTouches),targetTouches:b(l.targetTouches)})});
R.addEventListener("touchmove",qb=function(l){l.preventDefault();l.stopPropagation();T(0,2,{eventType:1,changedTouches:b(l.changedTouches),targetTouches:b(l.targetTouches)})});R.addEventListener("touchcancel",rb=function(l){T(0,2,{eventType:2,changedTouches:b(l.changedTouches),targetTouches:b(l.targetTouches)})});R.addEventListener("wheel",zb=function(l){l.preventDefault();l.stopPropagation();T(0,0,{eventType:3,posX:l.offsetX,posY:l.offsetY,wheel:l.deltaY})});window.addEventListener("blur",Bb=function(){T(0,
6,null)});window.addEventListener("focus",Ab=function(){T(0,5,null)});window.addEventListener("keydown",ub=function(l){l.preventDefault();l.stopPropagation();"F11"!==l.key||l.repeat?(T(0,1,d(l.repeat?2:0,l)),l.timeStamp&&"Unidentified"!==l.key&&(v=l.timeStamp)):D()});window.addEventListener("keyup",vb=function(l){l.preventDefault();l.stopPropagation();T(0,1,d(1,l))});G.addEventListener("touchstart",wb=function(l){l.preventDefault();l.stopPropagation()});G.addEventListener("touchend",xb=function(l){l.preventDefault();
l.stopPropagation();y()});G.addEventListener("touchmove",yb=function(l){l.preventDefault();l.stopPropagation()});(Aa="function"===typeof document.exitPointerLock)?(document.addEventListener("pointerlockchange",Cb=function(){window.setTimeout(function(){const l=document.pointerLockElement===R;l||va&&(Pa=performance.now()|0);va=l},60);Ga=!1}),document.addEventListener("pointerlockerror",Db=function(){Ga=!1})):h("Pointer lock is not supported on this browser");(ia="function"===typeof document.exitFullscreen)?
(n=window.matchMedia("(display-mode: fullscreen)"),(q=!(!navigator.keyboard||!navigator.keyboard.lock))&&n.addEventListener("change",Eb=function(){n.matches||navigator.keyboard.unlock()})):h("Fullscreen is not supported on this browser");if("undefined"!==typeof window.visualViewport)if("body"===Ua.tagName.toLowerCase())da=!0;else{const l=document.body;10>=Math.abs(l.clientWidth-Q.clientWidth)&&10>=Math.abs(l.clientHeight-Q.clientHeight)&&(da=!0)}else da=!1;da&&e("Note: Detected game is embedded in body, some screens may be resized to window.visualViewport instead for a better mobile experience");
try{await c(),F=!0}catch(l){F=!1}F||h("VSync is not supported on this browser");(S="function"===typeof navigator.getGamepads)?(window.addEventListener("gamepadconnected",sb=function(){T(0,10,{eventType:0})}),window.addEventListener("gamepaddisconnected",tb=function(l){T(0,10,{eventType:1,gamepad:l.gamepad})})):h("Gamepad detected as unsupported!");I.keyboardLayoutSupported=function(){return!(!navigator.keyboard||!navigator.keyboard.getLayoutMap)};I.iterateKeyboardLayout=new WebAssembly.Suspending(async function(){const l=
[];try{const A=await navigator.keyboard.getLayoutMap();A&&A.forEach&&A.forEach(function(U,O){l.push({key:U,value:O})})}catch(A){}return l});I.updateCanvasSize=function(l,A){R.width!==l&&(R.width=l);R.height!==A&&(R.height=A)};var ha=0;I.updatePlatformAndSleep=new WebAssembly.Suspending(function(l,A){a();if("string"!==typeof document.visibilityState||"visible"===document.visibilityState)return F&&A?(ha=0,c()):0>=l?(ha=0,Ib?Cc(0):Bc()):m(l);ha=0;return k(50)});I.isVSyncSupported=function(){return F};
I.mouseSetGrabbed=r;I.isMouseGrabSupported=function(){return Aa};I.isMouseGrabbed=function(){return va};I.isPointerLocked=function(){return Aa&&(Ga||document.pointerLockElement===R)};I.supportsFullscreen=function(){return ia};I.toggleFullscreen=D;I.isFullscreen=function(){return ia&&n.matches};I.touchSetOpenKeyboardZone=function(l,A,U,O){0!==U&&0!==O?(G.style.display="block",G.style.top=""+(K-A-O)/P+"px",G.style.left=""+l/P+"px",G.style.width=""+U/P+"px",G.style.height=""+O/P+"px"):(G.style.display=
"none",G.style.top="0px",G.style.left="0px",G.style.width="0px",G.style.height="0px")};I.touchCloseDeviceKeyboard=z;I.touchIsDeviceKeyboardOpenMAYBE=B;I.gamepadSupported=function(){return S};I.isVisualViewport=function(){return da};eb=function(){try{aa&&(Q.removeEventListener("contextmenu",aa),aa=null),ta&&(R.removeEventListener("mousedown",ta),ta=null),Qa&&(R.removeEventListener("mouseup",Qa),Qa=null),lb&&(R.removeEventListener("mousemove",lb),lb=null),mb&&(R.removeEventListener("mouseenter",mb),
mb=null),nb&&(R.removeEventListener("mouseleave",nb),nb=null),ob&&(R.removeEventListener("touchstart",ob),ob=null),pb&&(R.removeEventListener("touchend",pb),pb=null),qb&&(R.removeEventListener("touchmove",qb),qb=null),rb&&(R.removeEventListener("touchcancel",rb),rb=null),sb&&(window.removeEventListener("gamepadconnected",sb),sb=null),tb&&(window.removeEventListener("gamepaddisconnected",tb),tb=null),ub&&(window.removeEventListener("keydown",ub),ub=null),vb&&(window.removeEventListener("keyup",vb),
vb=null),wb&&(G.removeEventListener("touchstart",wb),wb=null),xb&&(G.removeEventListener("touchend",xb),xb=null),yb&&(G.removeEventListener("touchmove",yb),yb=null),zb&&(R.removeEventListener("wheel",zb),zb=null),Ab&&(window.removeEventListener("focus",Ab),Ab=null),Bb&&(window.removeEventListener("blur",Bb),Bb=null),Cb&&(document.removeEventListener("pointerlockchange",Cb),Cb=null),Db&&(document.removeEventListener("pointerlockerror",Db),Db=null),Eb&&(n.removeEventListener("change",Eb),Eb=null)}catch(l){h("Failed to remove event listeners! {}",
l)}eb=null}};(function(){function a(){this._socket.close()}function b(f){this._socket.send(f)}function d(f){this._socket.send(f)}function c(){return this._frameCountStr+this._frameCountBin}function k(){const f=this._queue;return f?(f._next===f&&f._prev===f?this._queue=null:(this._queue=f._next,f._prev._next=f._next,f._next._prev=f._prev),f._next=null,f._prev=null,0===f.type?--this._frameCountStr:--this._frameCountBin,f):null}function m(){var f=this._frameCountStr+this._frameCountBin;if(0===f)return null;f=Array(f);
var v=0,p=this._queue;const x=p;do{f[v++]=p;var E=p._next;p._next=null;p._prev=null;p=E}while(p!==x);this._queue=null;this._frameCountBin=this._frameCountStr=0;return f}function r(){this._queue=null;this._frameCountBin=this._frameCountStr=0}function D(f,v){var p=f._queue;if(!p)return null;const x=p;do{var E=p._next;if(p.type===v)return v=p._prev,E===p&&v===p?f._queue=null:(p===x&&(f._queue=E),v._next=E,E._prev=v),p._next=null,p._prev=null,p;p=E}while(p!==x);return null}function y(f,v,p){var x=0,E=
f._queue,K=E;do{var P=E._next;E.type===v&&(p[x++]=E);E=P}while(E!==K);p.length=x;for(K=0;K<x;++K)E=p[K],P=E._next,v=E._prev,P===E&&v===E?f._queue=null:(E===f._queue&&(f._queue=P),v._next=P,P._prev=v)}function z(){return this._frameCountStr}function B(){if(0===this._frameCountStr)return null;const f=D(this,0);f?--this._frameCountStr:this._frameCountStr=0;return f}function G(){var f=this._frameCountStr;if(0===f)return null;f=Array(f);y(this,0,f);this._frameCountStr=0;return f}function V(){const f=this._frameCountStr;
if(0===f)return null;y(this,0,Array(f));this._frameCountStr=0}function ca(){return this._frameCountBin}function u(){if(0===this._frameCountBin)return null;const f=D(this,1);f?--this._frameCountBin:this._frameCountBin=0;return f}function g(){var f=this._frameCountBin;if(0===f)return null;f=Array(f);y(this,1,f);this._frameCountBin=0;return f}function t(){const f=this._frameCountBin;if(0===f)return null;y(this,1,Array(f));this._frameCountBin=0}function w(f){const v="string"===typeof f;f={type:v?0:1,
data:f,timestamp:performance.now(),_next:null,_prev:null};const p=this._queue;if(p){const x=p._prev;x._next=f;f._prev=x;f._next=p;p._prev=f}else this._queue=f,f._next=f,f._prev=f;v?++this._frameCountStr:++this._frameCountBin}za.createWebSocketHandle=function(f){let v;try{v=new WebSocket(f)}catch(x){return h("Failed to create WebSocket: {}",f),la("Exception Caught",x),null}v.binaryType="arraybuffer";const p={state:1,_socket:v,_queue:null,_frameCountStr:0,_frameCountBin:0,_addRecievedFrame:w,closeSocket:a,
sendStringFrame:b,sendBinaryFrame:d,availableFrames:c,getNextFrame:k,getAllFrames:m,clearFrames:r,availableStringFrames:z,getNextStringFrame:B,getAllStringFrames:G,clearStringFrames:V,availableBinaryFrames:ca,getNextBinaryFrame:u,getAllBinaryFrames:g,clearBinaryFrames:t};v.addEventListener("open",function(){p.state=2});v.addEventListener("message",function(x){p._addRecievedFrame(x.data)});v.addEventListener("close",function(){3!==p.state&&(p.state=0)});v.addEventListener("error",function(){1===p.state&&
(p.state=3)});return p}})();function Xb(a,b){var d=Hb;const c=d&&200===b?a.getExtension("OES_vertex_array_object"):null,k=d&&200===b?a.getExtension("ANGLE_instanced_arrays"):null,m=d&&200===b&&null!==k,r=d&&(310===b||300===b)&&null!==a.getExtension("EXT_color_buffer_float"),D=d&&!r&&(310===b||300===b||200===b)&&null!==a.getExtension("EXT_color_buffer_half_float"),y=d&&200===b&&null!==a.getExtension("EXT_shader_texture_lod"),z=d&&200===b&&null!==a.getExtension("OES_fbo_render_mipmap"),B=d&&200===b&&null!==c,G=d&&200===b&&null!==
a.getExtension("OES_texture_float"),V=d&&300<=b&&null!==a.getExtension("OES_texture_float_linear"),ca=d&&200===b&&null!==a.getExtension("OES_texture_half_float"),u=d&&200===b&&null!==a.getExtension("OES_texture_half_float_linear");d=d&&null!==a.getExtension("EXT_texture_filter_anisotropic");const g=null!==a.getExtension("WEBGL_debug_renderer_info"),t=300<=b?0:200===b&&B?1:-1,w=300<=b?0:200===b&&m?1:-1,f=[b,t,w,0,0];if(300<=b||z)f[3]|=4;if(300<=b||y)f[3]|=8;300<=b&&(f[3]|=16);(320<=b||(300<=b||G)&&
(r||D))&&(f[3]|=32);(320<=b||(300<=b||ca)&&r)&&(f[3]|=64);d&&(f[3]|=128);(300<=b||u)&&(f[4]|=1);300<=b&&V&&(f[4]|=2);J.getCapBits=function(p){return f[p]};J.glEnable=a.enable.bind(a);J.glDisable=a.disable.bind(a);J.glClearColor=a.clearColor.bind(a);J.glClearDepth=a.clearDepth.bind(a);J.glClear=a.clear.bind(a);J.glDepthFunc=a.depthFunc.bind(a);J.glDepthMask=a.depthMask.bind(a);J.glCullFace=a.cullFace.bind(a);J.glViewport=a.viewport.bind(a);J.glBlendFunc=a.blendFunc.bind(a);J.glBlendFuncSeparate=a.blendFuncSeparate.bind(a);
J.glBlendEquation=a.blendEquation.bind(a);J.glBlendColor=a.blendColor.bind(a);J.glColorMask=a.colorMask.bind(a);J.glDrawBuffers=300<=b?a.drawBuffers.bind(a):pa("glDrawBuffers");J.glReadBuffer=300<=b?a.readBuffer.bind(a):pa("glReadBuffer");J.glReadPixels=a.readPixels.bind(a);J.glPolygonOffset=a.polygonOffset.bind(a);J.glLineWidth=a.lineWidth.bind(a);J.glGenBuffers=a.createBuffer.bind(a);J.glGenTextures=a.createTexture.bind(a);J.glCreateProgram=a.createProgram.bind(a);J.glCreateShader=a.createShader.bind(a);
J.glCreateFramebuffer=a.createFramebuffer.bind(a);J.glCreateRenderbuffer=a.createRenderbuffer.bind(a);J.glGenQueries=300<=b?a.createQuery.bind(a):pa("glGenQueries");J.glDeleteBuffers=a.deleteBuffer.bind(a);J.glDeleteTextures=a.deleteTexture.bind(a);J.glDeleteProgram=a.deleteProgram.bind(a);J.glDeleteShader=a.deleteShader.bind(a);J.glDeleteFramebuffer=a.deleteFramebuffer.bind(a);J.glDeleteRenderbuffer=a.deleteRenderbuffer.bind(a);J.glDeleteQueries=300<=b?a.deleteQuery.bind(a):pa("glDeleteQueries");
J.glBindBuffer=a.bindBuffer.bind(a);J.glBufferData=a.bufferData.bind(a);J.glBufferSubData=a.bufferSubData.bind(a);J.glEnableVertexAttribArray=a.enableVertexAttribArray.bind(a);J.glDisableVertexAttribArray=a.disableVertexAttribArray.bind(a);J.glVertexAttribPointer=a.vertexAttribPointer.bind(a);J.glActiveTexture=a.activeTexture.bind(a);J.glBindTexture=a.bindTexture.bind(a);J.glTexParameterf=a.texParameterf.bind(a);J.glTexParameteri=a.texParameteri.bind(a);J.glTexImage3D=300<=b?a.texImage3D.bind(a):
pa("glTexImage3D");J.glTexImage2D=a.texImage2D.bind(a);J.glTexSubImage2D=a.texSubImage2D.bind(a);J.glCopyTexSubImage2D=a.copyTexSubImage2D.bind(a);J.glTexStorage2D=300<=b?a.texStorage2D.bind(a):pa("glTexStorage2D");J.glPixelStorei=a.pixelStorei.bind(a);J.glGenerateMipmap=a.generateMipmap.bind(a);J.glShaderSource=a.shaderSource.bind(a);J.glCompileShader=a.compileShader.bind(a);J.glGetShaderi=a.getShaderParameter.bind(a);J.glGetShaderInfoLog=a.getShaderInfoLog.bind(a);J.glUseProgram=a.useProgram.bind(a);
J.glAttachShader=a.attachShader.bind(a);J.glDetachShader=a.detachShader.bind(a);J.glLinkProgram=a.linkProgram.bind(a);J.glGetProgrami=a.getProgramParameter.bind(a);J.glGetProgramInfoLog=a.getProgramInfoLog.bind(a);J.glDrawArrays=a.drawArrays.bind(a);J.glDrawElements=a.drawElements.bind(a);J.glBindAttribLocation=a.bindAttribLocation.bind(a);J.glGetAttribLocation=a.getAttribLocation.bind(a);J.glGetUniformLocation=a.getUniformLocation.bind(a);J.glGetUniformBlockIndex=300<=b?a.getUniformBlockIndex.bind(a):
pa("glGetUniformBlockIndex");J.glBindBufferRange=300<=b?a.bindBufferRange.bind(a):pa("glBindBufferRange");J.glUniformBlockBinding=300<=b?a.uniformBlockBinding.bind(a):pa("glUniformBlockBinding");J.glUniform1f=a.uniform1f.bind(a);J.glUniform2f=a.uniform2f.bind(a);J.glUniform3f=a.uniform3f.bind(a);J.glUniform4f=a.uniform4f.bind(a);J.glUniform1i=a.uniform1i.bind(a);J.glUniform2i=a.uniform2i.bind(a);J.glUniform3i=a.uniform3i.bind(a);J.glUniform4i=a.uniform4i.bind(a);J.glUniformMatrix2fv=a.uniformMatrix2fv.bind(a);
J.glUniformMatrix3fv=a.uniformMatrix3fv.bind(a);J.glUniformMatrix4fv=a.uniformMatrix4fv.bind(a);J.glUniformMatrix3x2fv=300<=b?a.uniformMatrix3x2fv.bind(a):pa("glUniformMatrix3x2fv");J.glUniformMatrix4x2fv=300<=b?a.uniformMatrix4x2fv.bind(a):pa("glUniformMatrix4x2fv");J.glUniformMatrix4x3fv=300<=b?a.uniformMatrix4x3fv.bind(a):pa("glUniformMatrix4x3fv");J.glBindFramebuffer=a.bindFramebuffer.bind(a);J.glCheckFramebufferStatus=a.checkFramebufferStatus.bind(a);J.glBlitFramebuffer=300<=b?a.blitFramebuffer.bind(a):
pa("glBlitFramebuffer");J.glRenderbufferStorage=a.renderbufferStorage.bind(a);J.glFramebufferTexture2D=a.framebufferTexture2D.bind(a);J.glFramebufferTextureLayer=300<=b?a.framebufferTextureLayer.bind(a):pa("glFramebufferTextureLayer");J.glBindRenderbuffer=a.bindRenderbuffer.bind(a);J.glFramebufferRenderbuffer=a.framebufferRenderbuffer.bind(a);J.glGetError=a.getError.bind(a);J.getAllExtensions=a.getSupportedExtensions.bind(a);J.isContextLost=a.isContextLost.bind(a);const v=[];m&&v.push("ANGLE_instanced_arrays");
r&&v.push("EXT_color_buffer_float");D&&v.push("EXT_color_buffer_half_float");y&&v.push("EXT_shader_texture_lod");z&&v.push("OES_fbo_render_mipmap");B&&v.push("OES_vertex_array_object");G&&v.push("OES_texture_float");V&&v.push("OES_texture_float_linear");ca&&v.push("OES_texture_half_float");u&&v.push("OES_texture_half_float_linear");d&&v.push("EXT_texture_filter_anisotropic");g&&v.push("WEBGL_debug_renderer_info");J.dumpActiveExtensions=function(){return v};J.glGetInteger=function(p){p=a.getParameter(p);
return"number"===typeof p?p:0};J.glGetString=function(p){if(g)switch(p){case 7936:p=a.getParameter(37445);null==p&&(p=a.getParameter(7936));break;case 7937:p=a.getParameter(37446);null==p&&(p=a.getParameter(7937));break;default:p=a.getParameter(p)}else p=a.getParameter(p);return"string"===typeof p?p:null};switch(t){case 0:J.glGenVertexArrays=a.createVertexArray.bind(a);J.glDeleteVertexArrays=a.deleteVertexArray.bind(a);J.glBindVertexArray=a.bindVertexArray.bind(a);break;case 1:J.glGenVertexArrays=
c.createVertexArrayOES.bind(c);J.glDeleteVertexArrays=c.deleteVertexArrayOES.bind(c);J.glBindVertexArray=c.bindVertexArrayOES.bind(c);break;default:C(J,"glGenVertexArrays"),C(J,"glDeleteVertexArrays"),C(J,"glBindVertexArray")}switch(w){case 0:J.glVertexAttribDivisor=a.vertexAttribDivisor.bind(a);J.glDrawArraysInstanced=a.drawArraysInstanced.bind(a);J.glDrawElementsInstanced=a.drawElementsInstanced.bind(a);break;case 1:J.glVertexAttribDivisor=k.vertexAttribDivisorANGLE.bind(k);J.glDrawArraysInstanced=
k.drawArraysInstancedANGLE.bind(k);J.glDrawElementsInstanced=k.drawElementsInstancedANGLE.bind(k);break;default:C(J,"glVertexAttribDivisor"),C(J,"glDrawArraysInstanced"),C(J,"glDrawElementsInstanced")}};var Ac=!1;const Dc=new MessageChannel;var Ec=null;Dc.port2.addEventListener("message",function(){Ec()});async function Mb(){Dc.port1.start();Dc.port2.start();Ec=function(){Ec=null};Dc.port1.postMessage(0);Ec?await new Promise(function(a){setTimeout(function(){Ec?h("Immediate continue hack is not supported"):Ac=!0;a()},25)}):h("Immediate continue hack is not supported")}Ba.getRootElement=function(){return Ua};Ba.getParentElement=function(){return Q};Ba.getCanvasElement=function(){return R};
Ba.getEaglercraftXOpts=function(){return N};Ba.getEventCount=ac.K.bind(ac);Ba.getNextEvent=ac.j.bind(ac);
Ba.queueAsyncDownload=function(a,b,d){try{fetch(a,{cache:b?"force-cache":"no-store",mode:"cors"}).then(function(c){return c.arrayBuffer()}).then(function(c){T(1,0,{requestId:d,arrayBuffer:c})}).catch(function(c){h("Failed to complete async download: {}",a);la("Exception Caught",c);T(1,0,{requestId:d,arrayBuffer:null})})}catch(c){h("Failed to fetch: {}",a),la("Exception Caught",c),T(1,0,{requestId:d,arrayBuffer:null})}};
Ba.download=new WebAssembly.Suspending(function(a,b){return new Promise(function(d){try{fetch(a,{cache:b?"force-cache":"no-store",mode:"cors"}).then(function(c){return c.arrayBuffer()}).then(function(c){d(c)}).catch(function(c){h("Failed to complete download: {}",a);la("Exception Caught",c);d(null)})}catch(c){h("Failed to fetch: {}",a),la("Exception Caught",c),d(null)}})});Ba.writeCrashReport=function(a){dc(a,!1)};Ba.steadyTimeMillis=performance.now.bind(performance);
function Cc(a){return new Promise(function(b){setTimeout(b,a)})}Ba.sleep=new WebAssembly.Suspending(Cc);function Fc(a){Ac?(Ec=a,Dc.port1.postMessage(0)):setTimeout(a,0)}function Bc(){return new Promise(Fc)}Ba.immediateContinue=new WebAssembly.Suspending(Bc);Ba.immediateContinueSupported=function(){return Ac};Ba.setCrashReportString=function(a,b){db[a]=b};var Gc="undefined"!==typeof window,Hc=null;function Ic(){return new Promise(function(a){if("navigator"in window&&"mediaDevices"in window.navigator&&"getUserMedia"in window.navigator.mediaDevices)try{window.navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(b){a(b)}).catch(function(b){h("getUserMedia Error! (async)");la("Exception Caught",b);a(null)})}catch(b){h("getUserMedia Error!"),a(null)}else h("No getUserMedia!"),a(null)})}
async function Jc(){return Gc?null===Hc&&(Hc=await Ic(),null===Hc)?(Gc=!1,null):Hc:null}
function Ob(){function a(b){const d=new Date;return b.replace("${date}",d.getFullYear()+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+("0"+d.getDate()).slice(-2)+" "+("0"+d.getHours()).slice(-2)+"-"+("0"+d.getMinutes()).slice(-2)+"-"+("0"+d.getSeconds()).slice(-2))}Ca.getMic=new WebAssembly.Suspending(Jc);Ca.setDataAvailableHandler=function(b,d,c){const k=performance.now();b.addEventListener("dataavailable",function(m){if(d)Kc(m.data,performance.now()-k|0,function(r){const D=URL.createObjectURL(r);mc(a(c),
D,function(){URL.revokeObjectURL(D)})},{U:function(r){e(r)}});else{const r=URL.createObjectURL(m.data);mc(a(c),r,function(){URL.revokeObjectURL(r)})}})}};function Pb(){function a(k){try{const m=JSON.parse(k);this._peerConnection.setRemoteDescription(m).then(()=>{m.hasOwnProperty("type")&&"offer"===m.type&&this._peerConnection.createAnswer().then(r=>{this._peerConnection.setLocalDescription(r).then(()=>{T(2,1,{objId:this.objId,data:JSON.stringify(r)})}).catch(D=>{h('Failed to set local description for "{}"! {}',this.objId,D.message);T(2,3,{objId:this.objId})})}).catch(r=>{h('Failed to create answer for "{}"! {}',this.objId,r.message);T(2,3,{objId:this.objId})})}).catch(r=>
{h('Failed to set remote description for "{}"! {}',this.objId,r.message);T(2,3,{objId:this.objId})})}catch(m){h(m.message),T(2,3,{objId:this.objId})}}function b(k){try{this._peerConnection.addIceCandidate(new RTCIceCandidate(JSON.parse(k))).catch(m=>{h('Failed to parse ice candidate for "{}"! {}',this.objId,m.message);T(2,3,{objId:this.objId})})}catch(m){h(m.message),T(2,3,{objId:this.objId})}}function d(){this._peerConnection.close()}Da.isSupported=function(){return"undefined"!==typeof navigator.mediaDevices&&
"undefined"!==typeof navigator.mediaDevices.getUserMedia&&"srcObject"in HTMLAudioElement.prototype};let c=0;Da.createRTCPeerConnection=function(k,m,r){try{const y=c++;var D;const z=new RTCPeerConnection({iceServers:JSON.parse(k),optional:[{DtlsSrtpKeyAgreement:!0}]});z.addEventListener("icecandidate",B=>{B.candidate&&T(2,0,{objId:y,data:JSON.stringify({sdpMLineIndex:""+B.candidate.sdpMLineIndex,candidate:B.candidate.candidate})})});z.addEventListener("track",B=>{B=B.streams[0];D._aud=document.createElement("audio");
D._aud.autoplay=!0;D._aud.muted=!0;D._aud.srcObject=B;T(2,2,{objId:y,stream:B})});r.getTracks().forEach(function(B){z.addTrack(B,r)});m&&z.createOffer().then(B=>{z.setLocalDescription(B).then(()=>{T(2,1,{objId:y,data:JSON.stringify(B)})}).catch(G=>{h('Failed to set local description for "{}"! {}',y,G.message);T(2,3,{objId:y})})}).catch(B=>{h('Failed to set create offer for "{}"! {}',y,B.message);T(2,3,{objId:y})});z.addEventListener("connectionstatechange",()=>{const B=z.connectionState;"disconnected"!==
B&&"failed"!==B||T(2,3,{objId:y})});return D={objId:y,_peerConnection:z,setRemoteDescription:a,addRemoteICECandidate:b,closeHandle:d}}catch(y){return h(y.message),null}}};function Qb(){const a=new ra;let b;b={iceServers:[],g:null,h:null,readyState:1,v:null,description:null,D:!1,C:!0,disconnect:function(c){if(b.h){try{b.h.close()}catch(k){}b.h=null}if(b.g){try{b.g.close()}catch(k){}b.g=null}c||(b.C=!0);b.readyState=0}};M.supported=function(){return"undefined"!==typeof RTCPeerConnection};M.clientLANReadyState=function(){return b.readyState};M.clientLANCloseConnection=function(){b.disconnect(!1)};M.clientLANSendPacket=function(c){if(null!==b.h&&"open"===b.h.readyState)try{b.h.send(c)}catch(k){b.disconnect(!1)}else b.disconnect(!1)};
M.clientLANReadPacket=function(){const c=a.j();return c?new Uint8Array(c.data):null};M.clientLANAvailable=function(){return a.u};M.clientLANSetICEServersAndConnect=function(c){b.iceServers.length=0;for(let k of c)c=k.split(";"),1===c.length?b.iceServers.push({urls:c[0]}):3===c.length&&b.iceServers.push({urls:c[0],username:c[1],credential:c[2]});2!==b.readyState&&1!==b.readyState||b.disconnect(!0);try{if(b.h){try{b.h.close()}catch(k){}b.h=null}if(b.g)try{b.g.close()}catch(k){}b.g=new RTCPeerConnection({iceServers:b.iceServers,
optional:[{DtlsSrtpKeyAgreement:!0}]});b.readyState=1}catch(k){la("Could not create LAN client RTCPeerConnection!",k);b.readyState=-2;return}try{const k=[];b.g.addEventListener("icecandidate",r=>{if(r.candidate){if(0===k.length){const D=[0,0],y=()=>{if(null!==b.g&&"disconnected"!==b.g.connectionState){const z=++D[1];D[0]!==k.length&&3>z?(D[0]=k.length,setTimeout(y,2E3)):(b.v=JSON.stringify(k),k.length=0)}};setTimeout(y,2E3)}k.push({sdpMLineIndex:r.candidate.sdpMLineIndex,candidate:r.candidate.candidate})}});
b.h=b.g.createDataChannel("lan");b.h.binaryType="arraybuffer";let m;m=()=>{0<k.length?setTimeout(m,10):(b.C=!1,b.D=!0)};b.h.addEventListener("open",m);b.h.addEventListener("message",r=>{a.push({data:r.data,_next:null})});b.g.createOffer().then(r=>{b.g.setLocalDescription(r).then(()=>{b.description=JSON.stringify(r)}).catch(D=>{h("Failed to set local description! {}",D.message);b.readyState=-1;b.disconnect(!1)})}).catch(r=>{h("Failed to set create offer! {}",r.message);b.readyState=-1;b.disconnect(!1)});
b.g.addEventListener("connectionstatechange",()=>{var r=b.g.connectionState;"disconnected"===r?b.disconnect(!1):"connected"===r?b.readyState=2:"failed"===r&&(b.readyState=-1,b.disconnect(!1))})}catch(k){if(b.h){try{b.h.close()}catch(m){}b.h=null}if(b.g){try{b.g.close()}catch(m){}b.g=null}la("Could not create LAN client RTCDataChannel!",k);b.readyState=-2}};M.clearLANClientState=function(){b.v=b.description=null;b.D=!1;b.C=!0};M.clientLANAwaitICECandidate=function(){if(null===b.v)return null;const c=
b.v;b.v=null;return c};M.clientLANAwaitDescription=function(){if(null===b.description)return null;const c=b.description;b.description=null;return c};M.clientLANAwaitChannel=function(){return b.D?(b.D=!1,!0):!1};M.clientLANClosed=function(){return b.C};M.clientLANSetICECandidate=function(c){try{const k=JSON.parse(c);for(c=0;c<k.length;++c)b.g.addIceCandidate(new RTCIceCandidate(k[c]))}catch(k){la("Uncaught exception setting remote ICE candidates",k),b.readyState=-1,b.disconnect(!1)}};M.clientLANSetDescription=
function(c){try{b.g.setRemoteDescription(JSON.parse(c))}catch(k){la("Uncaught exception setting remote description",k),b.readyState=-1,b.disconnect(!1)}};let d;d={iceServers:[],A:new Map,F:new Map,disconnect:function(c){const k=d.A.get(c);if(k){d.A.delete(c);k.l&&d.F.delete(k.l);try{k.disconnect()}catch(m){}k.s(4,null)}}};M.serverLANInitializeServer=function(c){d.iceServers.length=0;for(let k of c)c=k.split(";"),1===c.length?d.iceServers.push({urls:c[0]}):3===c.length&&d.iceServers.push({urls:c[0],
username:c[1],credential:c[2]})};M.serverLANCloseServer=function(){for(let c of Object.values(d.A))if(c){try{c.disconnect()}catch(k){}c.s(4,null)}d.A.clear()};M.serverLANCreatePeer=function(c){try{const k=new ra;let m;m={i:c,g:new RTCPeerConnection({iceServers:d.iceServers,optional:[{DtlsSrtpKeyAgreement:!0}]}),h:null,l:null,s:function(y,z){k.push({type:y,data:z,_next:null})},disconnect:function(){m.h&&m.h.close();m.g.close()}};d.A.set(m.i,m);const r=[];m.g.addEventListener("icecandidate",y=>{if(y.candidate){if(0===
r.length){const z=[0,0],B=()=>{if(null!==m.g&&"disconnected"!==m.g.connectionState){const G=++z[1];z[0]!==r.length&&3>G?(z[0]=r.length,setTimeout(B,2E3)):(m.s(0,JSON.stringify(r)),r.length=0)}};setTimeout(B,2E3)}r.push({sdpMLineIndex:y.candidate.sdpMLineIndex,candidate:y.candidate.candidate})}});let D;D=y=>{0<r.length?setTimeout(D,10,y):y.channel&&(y=y.channel,null!==m.h?y.close():(m.h=y,m.s(2,null),m.h.addEventListener("message",z=>{z=z.data;m.l?bb(m.l,z):m.s(3,new Uint8Array(z))})))};m.g.addEventListener("datachannel",
D);m.g.addEventListener("connectionstatechange",()=>{const y=m.g.connectionState;"disconnected"!==y&&"failed"!==y||d.disconnect(m.i)});return{peerId:m.i,countAvailableEvents:function(){return k.u},nextEvent:function(){return k.j()},writePacket:function(y){let z=!1;if(null!==m.h&&"open"===m.h.readyState)try{m.h.send(y)}catch(B){z=!0}else z=!0;z&&d.disconnect(m.i)},handleRemoteICECandidates:function(y){try{const z=JSON.parse(y);for(let B of z)m.g.addIceCandidate(new RTCIceCandidate(B))}catch(z){h('Failed to parse ice candidate for "{}"! {}',
m.i,z.message),d.disconnect(m.i)}},handleRemoteDescription:function(y){try{const z=JSON.parse(y);m.g.setRemoteDescription(z).then(()=>{z.hasOwnProperty("type")&&"offer"===z.type&&m.g.createAnswer().then(B=>{m.g.setLocalDescription(B).then(()=>{m.s(1,JSON.stringify(B))}).catch(G=>{h('Failed to set local description for "{}"! {}',m.i,G.message);d.disconnect(m.i)})}).catch(B=>{h('Failed to create answer for "{}"! {}',m.i,B.message);d.disconnect(m.i)})}).catch(B=>{h('Failed to set remote description for "{}"! {}',
m.i,B.message);d.disconnect(m.i)})}catch(z){h('Failed to parse remote description for "{}"! {}',m.i,z.message),d.disconnect(m.i)}},mapIPC:function(y){m.l?y||(d.F.delete(m.l),m.l=null):y&&(m.l=y,d.F.set(y,m))},disconnect:function(){d.disconnect(m.i)}}}catch(k){return la("Failed to create WebRTC LAN peer!",k),null}};$a=function(c,k){if(c=d.F.get(c)){let m=!1;if(c.h&&"open"===c.h.readyState)try{c.h.send(k)}catch(r){m=!0}else m=!0;m&&d.disconnect(c.i);return!0}return!1}};function Rb(){function a(p,x){p.allow=x;return p.allow===x}function b(p,x){const E=p.sandbox;for(var K=0;K<x.length;++K)E.add(x[K]);for(K=0;K<x.length;++K)if(!E.contains(x[K]))return!1;for(K=0;K<E.length;++K)if(!x.find(P=>P===E[K]))return!1;return!0}function d(p){if(G)f=document.createElement("iframe"),f.allow="",f.referrerPolicy="strict-origin",f.sandbox.add("allow-downloads"),p.scriptEnabled&&(f.sandbox.add("allow-scripts"),f.sandbox.add("allow-pointer-lock"));else{f=document.createElement("iframe");
f.referrerPolicy="strict-origin";var x=["allow-downloads"];p.scriptEnabled&&(x.push("allow-scripts"),x.push("allow-pointer-lock"));if(!a(f,"")||!b(f,x)){h("Caught safety exception while opening webview!");null!==f&&(f.remove(),f=null);h("Things you can try:");h("1. Set window.eaglercraftXOpts.forceWebViewSupport to true");h("2. Set window.eaglercraftXOpts.enableWebViewCSP to false");h("(these settings may compromise security)");c();w.innerHTML='<div style="padding-top:13vh;"><h1 style="text-align:center;"><img width="48" height="48" style="vertical-align:middle;" src="'+
Sa+'">&emsp;IFrame Safety Error</h1><h4 style="text-align:center;">The content cannot be displayed safely!</h4><h4 style="text-align:center;">Check console for more details</h4></div>';return}}f.j=!0;f.o="lazy";x=!1;if(1===p.contentMode){if(V&&B)if("string"===typeof f.csp){var E="default-src 'none';",K=p.strictCSPEnable?"":u?" https:":" http: https:";E=p.scriptEnabled?E+(" script-src 'unsafe-eval' 'unsafe-inline' data: blob:"+K+"; style-src 'unsafe-eval' 'unsafe-inline' data: blob:")+(K+"; img-src data: blob:")+
(K+"; font-src data: blob:")+(K+"; child-src data: blob:")+(K+"; frame-src data: blob:; media-src data: mediastream: blob:")+(K+"; connect-src data: blob:")+(K+"; worker-src data: blob:")+(K+";"):E+(" style-src data: 'unsafe-inline'"+K+"; img-src data:")+(K+"; font-src data:")+(K+"; media-src data:")+(K+";");f.csp=E}else ka("This browser does not support CSP attribute on iframes! (try Chrome)"),x=!0;else x=!0;x&&p.strictCSPEnable&&ka("Strict CSP was requested for this webview, but that feature is not available!")}else x=
!0;f.style.border="none";f.style.backgroundColor="white";f.style.width="100%";f.style.height="100%";f.classList.add("_eaglercraftX_webview_iframe_element");t.appendChild(f);1===p.contentMode?(E=y.decode(p.blob),p.blob=null,f.srcdoc=E):f.src=p.uri;const P=g,da=f;let Z=!1;f.addEventListener("mouseover",function(){P!==g||da!==f||Z||(Z=!0,f.contentWindow.focus())});f.addEventListener("mouseout",function(){P===g&&da===f&&Z&&(Z=!1,window.focus())});p.scriptEnabled&&p.serverMessageAPIEnabled&&(v=function(W){if(P===
g&&da===f&&W.source===da.contentWindow){W=W.data;if("object"===typeof W&&1===W.ver&&"string"===typeof W.channel&&0<W.channel.length){if("boolean"===typeof W.open){T(3,0,{eventType:W.open?0:1,channelName:W.channel});return}if("string"===typeof W.data){T(3,1,{eventType:0,channelName:W.channel,eventData:W.data});return}if(W.data instanceof ArrayBuffer){T(3,1,{eventType:1,channelName:W.channel,eventData:W.data});return}}ka("WebView sent an invalid message!")}else ka("Recieved message from on dead IFrame handler: (#{}) {}",
P,da.src)});e('WebView is loading: "{}"',1===p.contentMode?"about:srcdoc":f.src);e("JavaScript: {}, Strict CSP: {}, Message API: {}",p.scriptEnabled,p.strictCSPEnable&&!x,p.serverMessageAPIEnabled)}function c(){null!==w&&(++g,w.remove(),w=null);w=document.createElement("div");w.style.backgroundColor="white";w.style.width="100%";w.style.height="100%";w.classList.add("_eaglercraftX_webview_permission_screen");t.appendChild(w)}function k(p){c();w.innerHTML='<div style="padding-top:13vh;"><div style="margin:auto;max-width:450px;border:6px double black;text-align:center;padding:20px;"><h2><img width="32" height="32" style="vertical-align:middle;" src="'+
Sa+'">&emsp;Allow JavaScript</h2><p style="font-family:monospace;text-decoration:underline;word-wrap:break-word;" class="_eaglercraftX_permission_target_url"></p><h4 style="line-height:1.4em;">Strict CSP: '+(1!==p.contentMode?'<span style="color:red;">Impossible</span>':B&&V?p.strictCSPEnable?'<span style="color:green;">Enabled</span>':'<span style="color:red;">Disabled</span>':'<span style="color:red;">Unsupported</span>')+"&ensp;|&ensp;Message API: "+(p.serverMessageAPIEnabled?'<span style="color:red;">Enabled</span>':
'<span style="color:green;">Disabled</span>')+'</h4><p><input class="_eaglercraftX_remember_javascript" type="checkbox" checked> Remember my choice</p><p><button style="font-size:1.5em;" class="_eaglercraftX_allow_javascript">Allow</button>&emsp;<button style="font-size:1.5em;" class="_eaglercraftX_block_javascript">Block</button></p></div></div>';const x=g;if(1!==p.contentMode){const E=p.url;w.querySelector("._eaglercraftX_permission_target_url").innerText=255<E.length()?E.substring(0,253)+"...":
E}w.querySelector("._eaglercraftX_allow_javascript").addEventListener("click",function(){if(g===x&&null!==w){const E=w.querySelector("._eaglercraftX_remember_javascript");null!==E&&E.checked&&T(3,2,null);w.remove();w=null;++g;d(p)}});w.querySelector("._eaglercraftX_block_javascript").addEventListener("click",function(){if(g===x&&null!==w){const E=w.querySelector("._eaglercraftX_remember_javascript");null!==E&&E.checked&&T(3,3,null);m(p)}})}function m(p){c();w.innerHTML='<div style="padding-top:13vh;"><h1 style="text-align:center;"><img width="48" height="48" style="vertical-align:middle;" src="'+
Sa+'">&emsp;Content Blocked</h1><h4 style="text-align:center;">You chose to block JavaScript execution for this embed</h4><p style="text-align:center;"><button style="font-size:1.0em;" class="_eaglercraftX_re_evaluate_javascript">Re-evaluate</button></p></div>';const x=g;w.querySelector("._eaglercraftX_re_evaluate_javascript").addEventListener("click",function(){g===x&&null!==w&&(T(3,4,null),k(p))})}function r(p,x,E,K){if(t){const P=window.devicePixelRatio;t.style.top=""+x/P+"px";t.style.left=""+
p/P+"px";t.style.width=""+(E/P-10)+"px";t.style.height=""+(K/P-10)+"px"}}function D(){++g;f&&(f.remove(),f=null);v=null;w&&(w.remove(),w=null);t&&(t.remove(),t=null);window.focus()}const y=new TextDecoder("utf-8");var z=!1,B=!1,G=ib,V=jb;if(G)B=z=!0;else{B=z=!1;try{var ca=document.createElement("iframe");z=null!=ca&&"string"===typeof ca.allow&&"object"===typeof ca.sandbox;B=V&&z&&"string"===typeof ca.csp}catch(p){h("Error checking iframe support"),h(p)}}z?!B&&V&&ka("This browser does not support CSP attribute on iframes! (try Chrome)"):
h("This browser does not meet the safety requirements for webview support, this feature will be disabled");const u=location.protocol&&"https:"===location.protocol.toLowerCase();var g=0,t=null,w=null,f=null,v=null;window.addEventListener("message",function(p){v&&p.source!==window&&v(p)});Ea.checkSupported=function(){return z};Ea.checkCSPSupported=function(){return B};Ea.sendStringMessage=function(p,x){try{var E;null!=f&&null!=(E=f.contentWindow)?E.postMessage({ver:1,channel:p,type:"string",data:x},
"*"):h("Server tried to send the WebView a message, but the message channel is not open!")}catch(K){la("Failed to send string message to WebView!",K)}};Ea.sendBinaryMessage=function(p,x){try{var E;if(null!=f&&null!=(E=f.contentWindow)){const K=new Uint8Array(x.length);K.set(x,0);E.postMessage({ver:1,channel:p,type:"binary",data:K.buffer},"*")}else h("Server tried to send the WebView a message, but the message channel is not open!")}catch(K){la("Failed to send string message to WebView!",K)}};Ea.beginShowing=
function(p,x,E,K,P,da){if(z)try{switch(null!==t&&D(),t=document.createElement("div"),t.classList.add("_eaglercraftX_webview_container_element"),t.style.border="5px solid #333333",t.style.zIndex="11",t.style.position="absolute",t.style.backgroundColor="#DDDDDD",t.style.fontFamily="sans-serif",r(E,K,P,da),Q.appendChild(t),p){case 0:d(x);break;case 1:if(1===x.contentMode){const Z=new Uint8Array(x.blob.length);Z.set(x.blob,0);x.blob=Z}k(x);break;case 2:if(1===x.contentMode){const Z=new Uint8Array(x.blob.length);
Z.set(x.blob,0);x.blob=Z}m(x)}}catch(Z){la("Failed to begin showing WebView!",Z)}};Ea.resize=r;Ea.endShowing=D};function Sb(){var a=null;const b=new ra;var d=null;Ha.startIntegratedServer=new WebAssembly.Suspending(async function(){d||=URL.createObjectURL(new Blob(['"use strict"; (function(ctx, globals) {globals.__eaglerXOnMessage = function(o) {globals.__eaglerXOnMessage = function(oo) { console.error("Dropped IPC packet that was sent too early!"); };const eagRuntimeJSURL = URL.createObjectURL(new Blob([ o.eagruntimeJS ], { type: "text/javascript;charset=utf-8" }));ctx.getEaglercraftXOpts = function() { return o.eaglercraftXOpts; };ctx.getEagRuntimeJSURL = function() { return eagRuntimeJSURL; };ctx.getClassesWASMURL = function() { return o.classesWASM; };ctx.getClassesDeobfWASMURL = function() { return o.classesDeobfWASM; };ctx.getClassesTEADBGURL = function() { return o.classesTEADBG; };ctx.getEPKFiles = function() { return null; };ctx.getRootElement = function() { return null; };ctx.getMainArgs = function() { return ["_worker_process_"]; };ctx.getImageURL = function(idx) { return null; };ctx.runMain = function(mainFunc) { mainFunc(); };importScripts(eagRuntimeJSURL);};addEventListener("message", function(evt) { globals.__eaglerXOnMessage(evt.data); });})(self.__eaglercraftXLoaderContext = {}, self);'],
{type:"text/javascript;charset=utf8"}));try{a=new Worker(d)}catch(r){return la("Failed to create worker",r),!1}a.addEventListener("error",function(r){la("Worker Error",r.error)});a.addEventListener("message",function(r){const D=r.data.ch;D?"~!LOGGER"===D?Lb(r.data.txt,r.data.err):(r=r.data.dat)?$a(D,r)||b.push({ch:D,data:new Uint8Array(r),_next:null}):h("Recieved IPC packet with null buffer"):h("Recieved IPC packet with null channel")});const k=new Int8Array(La.length);k.set(La,0);try{var m=await fetch(Ta,
{cache:"force-cache"}).then(r=>r.arrayBuffer())}catch(r){la("Failed to fetch eagruntime.js contents",r);try{a.terminate()}catch(D){}return!1}a.postMessage({eaglercraftXOpts:N,eagruntimeJS:m,classesWASM:Ja,classesDeobfWASM:Ka,classesTEADBG:k.buffer});return!0});Ha.sendPacket=function(k,m){if(a){const r=new Uint8Array(m.length);r.set(m,0);a.postMessage({ch:k,dat:r.buffer})}};bb=function(k,m){a&&a.postMessage({ch:k,dat:m})};Ha.getAvailablePackets=b.K.bind(b);Ha.getNextPacket=b.j.bind(b);Ha.killWorker=
function(){a&&(a.terminate(),a=null)};var c=null;Ha.showCrashReportOverlay=function(k,m,r,D,y){c||(c=document.createElement("div"),c.setAttribute("style","z-index:99;position:absolute;background-color:black;color:white;overflow-x:hidden;overflow-y:scroll;overflow-wrap:break-word;white-space:pre-wrap;font:18px sans-serif;padding:20px;display:none;"),c.classList.add("_eaglercraftX_integratedserver_crash_element"),Q.appendChild(c));c.innerText="";c.innerText="CURRENT DATE: "+(new Date).toLocaleString()+
"\n\n"+k;k=window.devicePixelRatio;c.style.top=""+r/k+"px";c.style.left=""+m/k+"px";c.style.width=""+(D/k-20)+"px";c.style.height=""+(y/k-20)+"px";c.style.display="block"};Ha.hideCrashReportOverlay=function(){c&&(c.style.display="none")};window.__curEaglerX188UnloadListenerCB=function(){a&&a.postMessage({ch:"~!WASM_AUTOSAVE"})}};var ec=null,Lc=!1;
function Zb(){const a=new ra;self.__eaglerXOnMessage=function(b){const d=b.ch;b=b.dat;d?"~!WASM_AUTOSAVE"===d?Lc=!0:b?a.push({ch:d,data:new Uint8Array(b),_next:null}):h("Recieved IPC packet with null buffer"):h("Recieved IPC packet with null channel")};Ia.sendPacket=function(b,d){const c=new Uint8Array(d.length);c.set(d,0);postMessage({ch:b,dat:c.buffer})};Ia.getAvailablePackets=a.K.bind(a);Ia.getNextPacket=a.j.bind(a);Ia.setCrashCallback=function(){return{call:function(b){ec=b}}};Ia.isTabAboutToClose=
function(){const b=Lc;Lc=!1;return b}};ua.getByteBufferView=function(a,b){return new Int8Array(Ya,a,b)};ua.getUnsignedByteBufferView=function(a,b){return new Uint8Array(Ya,a,b)};ua.getUnsignedClampedByteBufferView=function(a,b){return new Uint8ClampedArray(Ya,a,b)};ua.getShortBufferView=function(a,b){return new Int16Array(Ya,a,b)};ua.getUnsignedShortBufferView=function(a,b){return new Uint16Array(Ya,a,b)};ua.getIntBufferView=function(a,b){return new Int32Array(Ya,a,b)};ua.getFloatBufferView=function(a,b){return new Float32Array(Ya,a,b)};const Mc={172351395:{name:"EBML",type:"Container"},646:{name:"EBMLVersion",type:"Uint"},759:{name:"EBMLReadVersion",type:"Uint"},754:{name:"EBMLMaxIDLength",type:"Uint"},755:{name:"EBMLMaxSizeLength",type:"Uint"},642:{name:"DocType",type:"String"},647:{name:"DocTypeVersion",type:"Uint"},645:{name:"DocTypeReadVersion",type:"Uint"},108:{name:"Void",type:"Binary"},63:{name:"CRC-32",type:"Binary"},190023271:{name:"SignatureSlot",type:"Container"},16010:{name:"SignatureAlgo",type:"Uint"},16026:{name:"SignatureHash",
type:"Uint"},16037:{name:"SignaturePublicKey",type:"Binary"},16053:{name:"Signature",type:"Binary"},15963:{name:"SignatureElements",type:"Container"},15995:{name:"SignatureElementList",type:"Container"},9522:{name:"SignedElement",type:"Binary"},139690087:{name:"Segment",type:"Container"},21863284:{name:"SeekHead",type:"Container"},3515:{name:"Seek",type:"Container"},5035:{name:"SeekID",type:"Binary"},5036:{name:"SeekPosition",type:"Uint"},88713574:{name:"Info",type:"Container"},13220:{name:"SegmentUID",
type:"Binary"},13188:{name:"SegmentFilename",type:"String"},1882403:{name:"PrevUID",type:"Binary"},1868715:{name:"PrevFilename",type:"String"},2013475:{name:"NextUID",type:"Binary"},1999803:{name:"NextFilename",type:"String"},1092:{name:"SegmentFamily",type:"Binary"},10532:{name:"ChapterTranslate",type:"Container"},10748:{name:"ChapterTranslateEditionUID",type:"Uint"},10687:{name:"ChapterTranslateCodec",type:"Uint"},10661:{name:"ChapterTranslateID",type:"Binary"},710577:{name:"TimecodeScale",type:"Uint"},
1161:{name:"Duration",type:"Float"},1121:{name:"DateUTC",type:"Date"},15273:{name:"Title",type:"String"},3456:{name:"MuxingApp",type:"String"},5953:{name:"WritingApp",type:"String"},103:{name:"Timecode",type:"Uint"},6228:{name:"SilentTracks",type:"Container"},6359:{name:"SilentTrackNumber",type:"Uint"},39:{name:"Position",type:"Uint"},43:{name:"PrevSize",type:"Uint"},35:{name:"SimpleBlock",type:"Binary"},32:{name:"BlockGroup",type:"Container"},33:{name:"Block",type:"Binary"},34:{name:"BlockVirtual",
type:"Binary"},13729:{name:"BlockAdditions",type:"Container"},38:{name:"BlockMore",type:"Container"},110:{name:"BlockAddID",type:"Uint"},37:{name:"BlockAdditional",type:"Binary"},27:{name:"BlockDuration",type:"Uint"},122:{name:"ReferencePriority",type:"Uint"},123:{name:"ReferenceBlock",type:"Int"},125:{name:"ReferenceVirtual",type:"Int"},36:{name:"CodecState",type:"Binary"},13730:{name:"DiscardPadding",type:"Int"},14:{name:"Slices",type:"Container"},104:{name:"TimeSlice",type:"Container"},76:{name:"LaceNumber",
type:"Uint"},77:{name:"FrameNumber",type:"Uint"},75:{name:"BlockAdditionID",type:"Uint"},78:{name:"Delay",type:"Uint"},79:{name:"SliceDuration",type:"Uint"},72:{name:"ReferenceFrame",type:"Container"},73:{name:"ReferenceOffset",type:"Uint"},74:{name:"ReferenceTimeCode",type:"Uint"},47:{name:"EncryptedBlock",type:"Binary"},106212971:{name:"Tracks",type:"Container"},46:{name:"TrackEntry",type:"Container"},87:{name:"TrackNumber",type:"Uint"},13253:{name:"TrackUID",type:"Uint"},3:{name:"TrackType",type:"Uint"},
57:{name:"FlagEnabled",type:"Uint"},8:{name:"FlagDefault",type:"Uint"},5546:{name:"FlagForced",type:"Uint"},28:{name:"FlagLacing",type:"Uint"},11751:{name:"MinCache",type:"Uint"},11768:{name:"MaxCache",type:"Uint"},254851:{name:"DefaultDuration",type:"Uint"},216698:{name:"DefaultDecodedFieldDuration",type:"Uint"},209231:{name:"TrackTimecodeScale",type:"Float"},4991:{name:"TrackOffset",type:"Int"},5614:{name:"MaxBlockAdditionID",type:"Uint"},4974:{name:"Name",type:"String"},177564:{name:"Language",
type:"String"},6:{name:"CodecID",type:"String"},9122:{name:"CodecPrivate",type:"Binary"},362120:{name:"CodecName",type:"String"},13382:{name:"AttachmentLink",type:"Uint"},1742487:{name:"CodecSettings",type:"String"},1785920:{name:"CodecInfoURL",type:"String"},438848:{name:"CodecDownloadURL",type:"String"},42:{name:"CodecDecodeAll",type:"Uint"},12203:{name:"TrackOverlay",type:"Uint"},5802:{name:"CodecDelay",type:"Uint"},5819:{name:"SeekPreRoll",type:"Uint"},9764:{name:"TrackTranslate",type:"Container"},
9980:{name:"TrackTranslateEditionUID",type:"Uint"},9919:{name:"TrackTranslateCodec",type:"Uint"},9893:{name:"TrackTranslateTrackID",type:"Binary"},96:{name:"Video",type:"Container"},26:{name:"FlagInterlaced",type:"Uint"},5048:{name:"StereoMode",type:"Uint"},5056:{name:"AlphaMode",type:"Uint"},5049:{name:"OldStereoMode",type:"Uint"},48:{name:"PixelWidth",type:"Uint"},58:{name:"PixelHeight",type:"Uint"},5290:{name:"PixelCropBottom",type:"Uint"},5307:{name:"PixelCropTop",type:"Uint"},5324:{name:"PixelCropLeft",
type:"Uint"},5341:{name:"PixelCropRight",type:"Uint"},5296:{name:"DisplayWidth",type:"Uint"},5306:{name:"DisplayHeight",type:"Uint"},5298:{name:"DisplayUnit",type:"Uint"},5299:{name:"AspectRatioType",type:"Uint"},963876:{name:"ColourSpace",type:"Binary"},1029411:{name:"GammaValue",type:"Float"},230371:{name:"FrameRate",type:"Float"},97:{name:"Audio",type:"Container"},53:{name:"SamplingFrequency",type:"Float"},14517:{name:"OutputSamplingFrequency",type:"Float"},31:{name:"Channels",type:"Uint"},15739:{name:"ChannelPositions",
type:"Binary"},8804:{name:"BitDepth",type:"Uint"},98:{name:"TrackOperation",type:"Container"},99:{name:"TrackCombinePlanes",type:"Container"},100:{name:"TrackPlane",type:"Container"},101:{name:"TrackPlaneUID",type:"Uint"},102:{name:"TrackPlaneType",type:"Uint"},105:{name:"TrackJoinBlocks",type:"Container"},109:{name:"TrackJoinUID",type:"Uint"},64:{name:"TrickTrackUID",type:"Uint"},65:{name:"TrickTrackSegmentUID",type:"Binary"},70:{name:"TrickTrackFlag",type:"Uint"},71:{name:"TrickMasterTrackUID",
type:"Uint"},68:{name:"TrickMasterTrackSegmentUID",type:"Binary"},11648:{name:"ContentEncodings",type:"Container"},8768:{name:"ContentEncoding",type:"Container"},4145:{name:"ContentEncodingOrder",type:"Uint"},4146:{name:"ContentEncodingScope",type:"Uint"},4147:{name:"ContentEncodingType",type:"Uint"},4148:{name:"ContentCompression",type:"Container"},596:{name:"ContentCompAlgo",type:"Uint"},597:{name:"ContentCompSettings",type:"Binary"},4149:{name:"ContentEncryption",type:"Container"},2017:{name:"ContentEncAlgo",
type:"Uint"},2018:{name:"ContentEncKeyID",type:"Binary"},2019:{name:"ContentSignature",type:"Binary"},2020:{name:"ContentSigKeyID",type:"Binary"},2021:{name:"ContentSigAlgo",type:"Uint"},2022:{name:"ContentSigHashAlgo",type:"Uint"},206814059:{name:"Cues",type:"Container"},59:{name:"CuePoint",type:"Container"},51:{name:"CueTime",type:"Uint"},55:{name:"CueTrackPositions",type:"Container"},119:{name:"CueTrack",type:"Uint"},113:{name:"CueClusterPosition",type:"Uint"},112:{name:"CueRelativePosition",type:"Uint"},
50:{name:"CueDuration",type:"Uint"},4984:{name:"CueBlockNumber",type:"Uint"},106:{name:"CueCodecState",type:"Uint"},91:{name:"CueReference",type:"Container"},22:{name:"CueRefTime",type:"Uint"},23:{name:"CueRefCluster",type:"Uint"},4959:{name:"CueRefNumber",type:"Uint"},107:{name:"CueRefCodecState",type:"Uint"},155296873:{name:"Attachments",type:"Container"},8615:{name:"AttachedFile",type:"Container"},1662:{name:"FileDescription",type:"String"},1646:{name:"FileName",type:"String"},1632:{name:"FileMimeType",
type:"String"},1628:{name:"FileData",type:"Binary"},1710:{name:"FileUID",type:"Uint"},1653:{name:"FileReferral",type:"Binary"},1633:{name:"FileUsedStartTime",type:"Uint"},1634:{name:"FileUsedEndTime",type:"Uint"},4433776:{name:"Chapters",type:"Container"},1465:{name:"EditionEntry",type:"Container"},1468:{name:"EditionUID",type:"Uint"},1469:{name:"EditionFlagHidden",type:"Uint"},1499:{name:"EditionFlagDefault",type:"Uint"},1501:{name:"EditionFlagOrdered",type:"Uint"},54:{name:"ChapterAtom",type:"Container"},
13252:{name:"ChapterUID",type:"Uint"},5716:{name:"ChapterStringUID",type:"String"},17:{name:"ChapterTimeStart",type:"Uint"},18:{name:"ChapterTimeEnd",type:"Uint"},24:{name:"ChapterFlagHidden",type:"Uint"},1432:{name:"ChapterFlagEnabled",type:"Uint"},11879:{name:"ChapterSegmentUID",type:"Binary"},11964:{name:"ChapterSegmentEditionUID",type:"Uint"},9155:{name:"ChapterPhysicalEquiv",type:"Uint"},15:{name:"ChapterTrack",type:"Container"},9:{name:"ChapterTrackNumber",type:"Uint"},0:{name:"ChapterDisplay",
type:"Container"},5:{name:"ChapString",type:"String"},892:{name:"ChapLanguage",type:"String"},894:{name:"ChapCountry",type:"String"},10564:{name:"ChapProcess",type:"Container"},10581:{name:"ChapProcessCodecID",type:"Uint"},1293:{name:"ChapProcessPrivate",type:"Binary"},10513:{name:"ChapProcessCommand",type:"Container"},10530:{name:"ChapProcessTime",type:"Uint"},10547:{name:"ChapProcessData",type:"Binary"},39109479:{name:"Tags",type:"Container"},13171:{name:"Tag",type:"Container"},9152:{name:"Targets",
type:"Container"},10442:{name:"TargetTypeValue",type:"Uint"},9162:{name:"TargetType",type:"String"},9157:{name:"TagTrackUID",type:"Uint"},9161:{name:"TagEditionUID",type:"Uint"},9156:{name:"TagChapterUID",type:"Uint"},9158:{name:"TagAttachmentUID",type:"Uint"},10184:{name:"SimpleTag",type:"Container"},1443:{name:"TagName",type:"String"},1146:{name:"TagLanguage",type:"String"},1156:{name:"TagDefault",type:"Uint"},1159:{name:"TagString",type:"String"},1157:{name:"TagBinary",type:"Binary"}};
function Nc(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function Oc(a,b){this.name=a||"Unknown";this.type=b||"Unknown"}Oc.prototype.j=function(){};Oc.prototype.m=function(){};function Pc(a,b){Oc.call(this,a,b||"Uint")}Nc(Pc,Oc);Pc.prototype.j=function(){this.data="";for(var a=0;a<this.source.length;a++){var b=this.source[a].toString(16);this.data+=1===b.length%2?"0"+b:b}};
Pc.prototype.m=function(){var a=this.data.length/2;this.source=new Uint8Array(a);for(var b=0;b<a;b++)this.source[b]=parseInt(this.data.substr(2*b,2),16)};Pc.prototype.L=function(){return parseInt(this.data,16)};Pc.prototype.H=function(a){a=a.toString(16);this.data=1===a.length%2?"0"+a:a;this.m()};function Qc(a,b){Oc.call(this,a,b||"Float")}Nc(Qc,Oc);Qc.prototype.j=function(){var a=this.source.reverse();this.data=(new (this.source&&4===this.source.length?Float32Array:Float64Array)(a.buffer))[0]};
Qc.prototype.m=function(){var a=new (this.source&&4===this.source.length?Float32Array:Float64Array)([this.data]);this.source=(new Uint8Array(a.buffer)).reverse()};Qc.prototype.L=function(){return this.data};Qc.prototype.H=function(a){this.data=a;this.m()};function Rc(a,b){Oc.call(this,a,b||"Container")}Nc(Rc,Oc);function Sc(a){var b=a.source[a.offset++],d=8-b.toString(2).length;b-=1<<7-d;for(var c=0;c<d;c++)b*=256,b+=a.source[a.offset++];return b}
Rc.prototype.j=function(){this.data=[];for(this.offset=0;this.offset<this.source.length;this.offset=b){var a=Sc(this);var b=Sc(this);b=Math.min(this.offset+b,this.source.length);var d=this.source.slice(this.offset,b),c=Mc[a]||{name:"Unknown",type:"Unknown"},k=Oc;switch(c.type){case "Container":k=Rc;break;case "Uint":k=Pc;break;case "Float":k=Qc}k=c=new k(c.name,c.type);k.source=d;k.j();this.data.push({id:a,$:a.toString(16),data:c})}};
function Tc(a,b,d){for(var c=1,k=128;b>=k&&8>c;c++,k*=128);if(!d)for(b=k+b,d=c-1;0<=d;d--)k=b%256,a.source[a.offset+d]=k,b=(b-k)/256;a.offset+=c}function Uc(a,b){for(var d=a.offset=0;d<a.data.length;d++){var c=a.data[d],k=c.data.source,m=k.length;Tc(a,c.id,b);Tc(a,m,b);b||a.source.set(k,a.offset);a.offset+=m}return a.offset}Rc.prototype.m=function(){var a=Uc(this,"draft");this.source=new Uint8Array(a);Uc(this,null)};
function Vc(a,b){for(var d=0;d<a.data.length;d++){var c=a.data[d];if(c.id===b)return c.data}return null}function Wc(a){Rc.call(this,"File","File");this.source=a;this.j()}Nc(Wc,Rc);
function Xc(a,b,d){d=d&&d.U;void 0===d?d=function(D){console.log(D)}:d||=function(){};var c=Vc(a,139690087);if(!c)return d("[fix-webm-duration] Segment section is missing"),!1;var k=Vc(c,88713574);if(!k)return d("[fix-webm-duration] Info section is missing"),!1;var m=Vc(k,710577);if(!m)return d("[fix-webm-duration] TimecodeScale section is missing"),!1;var r=Vc(k,1161);if(r)if(0>=r.L())d("[fix-webm-duration] Duration section is present, but the value is empty"),r.H(b);else return d("[fix-webm-duration] Duration section is present"),
!1;else d("[fix-webm-duration] Duration section is missing"),r=new Qc("Duration","Float"),r.H(b),k.data.push({id:1161,data:r});m.H(1E6);k.m();c.m();a.m();return!0}function Kc(a,b,d,c){try{var k=new FileReader;k.onloadend=function(){try{var m=new Wc(new Uint8Array(k.result));Xc(m,b,c)&&(a=new Blob([m.source.buffer],{type:a.type||"video/webm"}))}catch(r){}d(a)};k.readAsArrayBuffer(a)}catch(m){d(a)}};var Yc;
(function(){function a(u){let g=B.get(u);"undefined"===typeof g&&(g=new Function("return "+u+";"),B.set(u,g));return g()}function b(u){let g={exports:null,B:null,I:null};d(u);c(u);k(u,g);m(u,g);u.teavmMath=Math;return{O(t){g.exports=t},Y(t){g.B=t},X(t){g.I=t}}}function d(u){u.teavmDate={currentTimeMillis:()=>(new Date).getTime(),dateToString:g=>(new Date(g)).toString(),getYear:g=>(new Date(g)).getFullYear(),setYear:(g,t)=>{g=new Date(g);g.setFullYear(t);return g.getTime()},getMonth:g=>(new Date(g)).getMonth(),setMonth:(g,
t)=>{g=new Date(g);g.setMonth(t);return g.getTime()},getDate:g=>(new Date(g)).getDate(),setDate:(g,t)=>{g=new Date(g);g.setDate(t);return g.getTime()},create:(g,t,w,f,v,p)=>(new Date(g,t,w,f,v,p)).getTime(),createFromUTC:(g,t,w,f,v,p)=>Date.UTC(g,t,w,f,v,p)}}function c(u){let g=[],t=[];u.teavmConsole={putcharStderr:function(w){10===w?(w=String.fromCharCode(...g),console.error(w),fa&&fa(w,!0),g.length=0):g.push(w)},putcharStdout:function(w){10===w?(w=String.fromCharCode(...t),console.log(w),fa&&fa(w,
!1),t.length=0):t.push(w)}}}function k(u,g){let t=new FinalizationRegistry(f=>{let v=g.exports["teavm.reportGarbageCollectedValue"];"undefined"!==typeof v&&g.I(function(){v(f.V,f.W)})}),w=new FinalizationRegistry(f=>{let v=g.exports["teavm.reportGarbageCollectedString"];"function"===typeof v&&g.I(function(){v(f)})});u.teavm={createWeakRef:(f,v,p)=>{null!==p&&t.register(f,{W:v,V:p});return new WeakRef(f)},deref:f=>f.deref(),createStringWeakRef:(f,v)=>{w.register(f,v);return new WeakRef(f)},stringDeref:f=>
f.deref(),takeStackTrace:()=>{var f=Error().stack;let v=[];for(let p of f.split("\n"))f=G.exec(p),null!==f&&2<=f.length&&v.push(parseInt(f[1],16));return{getStack:function(){let p;if(g.B)try{p=g.B(v)}catch(x){console.warn("Could not deobfuscate stack",x)}p||=v.map(x=>({className:"java.lang.Throwable$FakeClass",method:"fakeMethod",file:"Throwable.java",line:x}));return p}}},decorateException:f=>{new ca(g,f)}}}function m(u,g){function t(n){return n}function w(n){var q=n.charAt(0);var F=""+(f(q)?q:"_");
for(q=1;q<n.length;++q){let S=n.charAt(q);var L=S;L=f(L)||"0"<=L&&"9">=L;F+=L?S:"_"}return F}function f(n){return"A"<=n&&"Z">=n||"a"<=n&&"z">=n||"_"===n||"$"===n}function v(n,q,F){null===n?(new Function("value",q+" = value;"))(F):n[q]=F}function p(n){g.exports["teavm.js.throwException"](V in n?n[V]:g.exports["teavm.js.wrapException"](n))}function x(n){a:{if(n instanceof WebAssembly.Exception){var q=g.exports["teavm.javaException"];var F=g.exports["teavm.getJsException"];if(n.is(q)){n=n.getArg(q,0);
q=g.exports["teavm.js.extractException"](n);if(null!==q){F=q;break a}F=F(n);"undefined"===typeof F&&(F=new ca(g,n));break a}}F=n}throw F;}function E(n){var q=[];for(let F=0;F<n.length;++F)q.push("p"+F);q=0===q.length?"":q.join(", ");q=(new Function("rethrowJavaAsJs","fn",`return function(${q}) {\n`+"    try {\n"+`        return fn(${q});\n`+"    } catch (e) {\n        rethrowJavaAsJs(e);\n    }\n};"))(x,n);q.__impl=n;q.__rethrow=x;return q}function K(n,q){return(new Function("constructor",`return function ${n}(marker, javaObject) {\n`+
"    return constructor.call(this, marker, javaObject);\n}\n"))(q)}function P(n){try{return n()}catch(q){p(q)}}let da=Symbol("javaObject"),Z=Symbol("functions"),W=Symbol("functionOrigin"),Fa=Symbol("wrapperCallMarker"),ab=new WeakMap,Aa=new WeakMap,va=new Map,Ga=new FinalizationRegistry(n=>va.delete(n)),Pa=new WeakMap,sa=2463534242;u.teavmJso={emptyString:()=>"",stringFromCharCode:n=>String.fromCharCode(n),concatStrings:(n,q)=>n+q,stringLength:n=>n.length,charAt:(n,q)=>n.charCodeAt(q),emptyArray:()=>
[],appendToArray:(n,q)=>n.push(q),unwrapBoolean:n=>n?1:0,wrapBoolean:n=>!!n,getProperty:function(n,q){try{return null!==n?n[q]:a(q)}catch(F){p(F)}},setProperty:v,setPropertyPure:v,global:n=>{try{return a(n)}catch(q){p(q)}},createClass:(n,q,F)=>{n=w(n||"JavaObject");let L;L=null===q?function(aa){this[da]=aa;this[Z]=null}:function(aa){q.call(this,aa)};let S=K(n,function(aa,ta){if(aa===Fa)L.call(this,ta);else{if(null===F)throw Error("This class can't be instantiated directly");try{return F.apply(null,
arguments)}catch(Qa){x(Qa)}}});S.prototype=Object.create(q||Object.prototype);S.prototype.constructor=S;n=K(n,function(aa){return S.call(this,Fa,aa)});n[Fa]=S;n.prototype=S.prototype;return n},exportClass:n=>n[Fa],defineMethod:(n,q,F)=>{let L=[];for(let S=1;S<F.length;++S)L.push("p"+S);n.prototype[q]=(new Function("rethrowJavaAsJs","fn",`return function(${0===L.length?"":L.join(", ")}) {\n`+"    try {\n"+`        return fn(${["this",L].join(", ")});\n`+"    } catch (e) {\n        rethrowJavaAsJs(e);\n    }\n};"))(x,
F)},defineStaticMethod:(n,q,F)=>{n[q]=E(F)},defineFunction:E,defineProperty:(n,q,F,L)=>{let S={get(){try{return F(this)}catch(aa){x(aa)}}};null!==L&&(S.set=function(aa){try{L(this,aa)}catch(ta){x(ta)}});Object.defineProperty(n.prototype,q,S)},defineStaticProperty:(n,q,F,L)=>{let S={get(){try{return F()}catch(aa){x(aa)}}};null!==L&&(S.set=function(aa){try{L(aa)}catch(ta){x(ta)}});Object.defineProperty(n,q,S)},javaObjectToJS:(n,q)=>{if(null===n)return null;var F=ab.get(n);if("undefined"!=typeof F&&
(F=F.deref(),"undefined"!==typeof F))return F;q=new q(n);ab.set(n,new WeakRef(q));return q},unwrapJavaObject:n=>n[da],asFunction:(n,q)=>{let F=n[Z];null===F&&(F=Object.create(null),n[Z]=F);let L=F[q];"function"!==typeof L&&(L=function(){return n[q].apply(n,arguments)},L[W]=n,F[q]=L);return L},functionAsObject:(n,q)=>{let F=n[W];if("undefined"!==typeof F){let L=F[Z];if(void 0!==L&&L[q]===n)return F}return{[q]:function(...L){try{return n(...L)}catch(S){x(S)}}}},wrapObject:n=>{if(null===n)return null;
if("object"===typeof n||"function"===typeof n){var q=n[da];if("object"===typeof q)return q;q=Aa.get(n);if(void 0!==q&&(q=q.deref(),void 0!==q))return q;q=g.exports["teavm.jso.createWrapper"](n);Aa.set(n,new WeakRef(q));return q}q=va.get(n);if(void 0!==q&&(q=q.deref(),void 0!==q))return q;q=g.exports["teavm.jso.createWrapper"](n);va.set(n,new WeakRef(q));Ga.register(q,n);return q},isPrimitive:(n,q)=>typeof n===q,instanceOf:(n,q)=>n instanceof q,instanceOfOrNull:(n,q)=>null===n||n instanceof q,sameRef:(n,
q)=>n===q,hashCode:n=>{if("object"===typeof n||"function"===typeof n||"symbol"===typeof n){var q=Pa.get(n);if("number"===typeof q)return q;q=sa;q^=q<<13;q^=q>>>17;sa=q^=q<<5;Pa.set(n,q);return q}return"number"===typeof n?n|0:"bigint"===typeof n?BigInt.asIntN(32,n):"boolean"===typeof n?n?1:0:0},apply:(n,q,F)=>{try{return null===n?a(q)(...F):n[q](...F)}catch(L){p(L)}},concatArray:(n,q)=>n.concat(q),getJavaException:n=>n[V]};for(var ia of"wrapByte wrapShort wrapChar wrapInt wrapFloat wrapDouble unwrapByte unwrapShort unwrapChar unwrapInt unwrapFloat unwrapDouble".split(" "))u.teavmJso[ia]=
t;ia=[];for(let n=0;32>n;++n){let q=0===ia.length?"":ia.join(", "),F=[...ia,"body"].join(", ");u.teavmJso["createFunction"+n]=(new Function("wrapCallFromJavaToJs",...ia,"body",`return new Function('wrapCallFromJavaToJs', ${F}).bind(this, wrapCallFromJavaToJs);`)).bind(null,P);u.teavmJso["bindFunction"+n]=(L,...S)=>L.bind(null,...S);u.teavmJso["callFunction"+n]=(new Function("rethrowJsAsJava","fn",...ia,"try {\n"+`    return fn(${q});\n`+"} catch (e) {\n    rethrowJsAsJava(e);\n}")).bind(null,p);u.teavmJso["callMethod"+
n]=(new Function("rethrowJsAsJava","getGlobalName","instance","method",...ia,"try {\n     return instance !== null\n"+`        ? instance[method](${q})\n`+`        : getGlobalName(method)(${q});\n`+"} catch (e) {\n    rethrowJsAsJava(e);\n}")).bind(null,p,a);u.teavmJso["construct"+n]=(new Function("rethrowJsAsJava","constructor",...ia,"try {\n"+`    return new constructor(${q});\n`+"} catch (e) {\n    rethrowJsAsJava(e);\n}")).bind(null,p);u.teavmJso["arrayOf"+n]=new Function(...ia,"return ["+q+"]");
ia.push("p"+(n+1))}}async function r(u){try{const g={},t=b(g),w=u.path instanceof WebAssembly.Module?u.path:await WebAssembly.compileStreaming(fetch(u.path)),f=new WebAssembly.Instance(w,g);t.O(f.exports);return{module:w,instance:f}}catch(g){return console.warn("Could not load deobfuscator",g),null}}function D(u,g,t){let w=null,f=!1;return v=>{if(!f){f=!0;if(null!==g)try{w=t.exports.createFromExternalFile.value(g)}catch(p){console.warn("Could not load create deobfuscator",p)}if(null==w&&null!==u)try{w=
t.exports.createForModule.value(u)}catch(p){console.warn("Could not create deobfuscator from module data",p)}}return null!==w?w.deobfuscate(v):[]}}async function y(u,g){if(!g.enabled||"auto"!==u&&"external"!==u)return null;if(g.J instanceof ArrayBuffer)return new Int8Array(g.J);u=await fetch(g.J);return u.ok?new Int8Array(await u.arrayBuffer()):null}function z(u){const g=new ra;u.teavm.pollAsyncCallbacks=function(){for(var t;t=g.j();)t.fn()};return function(t){g.push({fn:t,_next:null})}}let B=new Map,
G=/.+:wasm-function\[[0-9]+]:0x([0-9a-f]+).*/,V=Symbol("javaException");class ca extends Error{constructor(u,g){super();this.j=u;this[V]=g;u.exports["teavm.setJsException"](g,this)}get message(){var u=this.j.exports["teavm.exceptionMessage"];return"function"===typeof u&&(u=u(this[V]),null!=u)?u:"(could not fetch message)"}}Yc={load:async function(u,g){g||={};var t=g.B||{};let [w,f,v]=await Promise.all([t.enabled?r(t):Promise.resolve(null),u instanceof WebAssembly.Module?Promise.resolve(u):WebAssembly.compileStreaming(fetch(u)),
y(t.T,t)]);t={};u=b(t);"undefined"!==typeof g.M&&g.M(t);u.X(z(t));g=await WebAssembly.instantiate(f,t);t={};u.O(g.exports);if(w){let p=D(null,v,w.instance);null!==p&&(u.Y(p),t.deobfuscator=p)}u={exports:t,instance:g,N:{P:f,S:w?w.module:null}};for(let p in g.exports){let x=g.exports[p];x instanceof WebAssembly.Global?Object.defineProperty(t,p,{get:()=>x.value}):"function"===typeof x&&(t[p]=x)}t.memory=g.exports["teavm.memory"];t.R=v;return u},Z:b,aa:function(u){return new Proxy(u,{get(g,t){return new WebAssembly.Global({value:"externref",
mutable:!1},g[t])}})}}})();async function Zc(){try{N=self.__eaglercraftXLoaderContext.getEaglercraftXOpts();Ta=self.__eaglercraftXLoaderContext.getEagRuntimeJSURL();const a=self.__eaglercraftXLoaderContext.getClassesWASMURL(),b=self.__eaglercraftXLoaderContext.getClassesDeobfWASMURL(),d=self.__eaglercraftXLoaderContext.getClassesTEADBGURL();Na=self.__eaglercraftXLoaderContext.getEPKFiles();Ua=self.__eaglercraftXLoaderContext.getRootElement();self.__eaglercraftXLoaderContext.getImageURL(0);Oa=self.__eaglercraftXLoaderContext.getImageURL(1);
Ra=self.__eaglercraftXLoaderContext.getImageURL(2);Sa=self.__eaglercraftXLoaderContext.getImageURL(3);const c=self.__eaglercraftXLoaderContext.getMainArgs();delete self.__eaglercraftXLoaderContext;if("_worker_process_"!==c[0]){if(!await Kb())return}else ea="worker",await Yb();e("Loading EaglercraftX WASM GC binary...");const k=await Yc.load(a,{B:{enabled:!0,path:b,T:"external",J:d},M:function(m){m.WASMGCBufferAllocator=ua;m.platformApplication=H;m.platformAssets=wa;m.platformAudio=xa;m.platformFilesystem=
ya;m.platformInput=I;m.platformNetworking=za;m.platformOpenGL=J;m.platformRuntime=Ba;m.platformScreenRecord=Ca;m.platformVoiceClient=Da;m.platformWebRTC=M;m.platformWebView=Ea;m.clientPlatformSingleplayer=Ha;m.serverPlatformSingleplayer=Ia;m.teavm.notifyHeapResized=function(){$b(k.exports.memory)}}});Ja=k.N.P;Ka=k.N.S;La=k.exports.R;$b(k.exports.memory);Ma=k.exports.deobfuscator;e("Calling entry point with args: {}",JSON.stringify(c));try{await WebAssembly.promising(k.exports.main.__impl)(c)}catch(m){k.exports.main.__rethrow(m)}finally{ka("Main function has returned!")}}catch(a){cc(a)}}
"object"===typeof self.__eaglercraftXLoaderContext?self.__eaglercraftXLoaderContext.runMain(Zc):console.error("???");}).call(this);
